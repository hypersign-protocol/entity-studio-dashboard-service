(function(t){function e(e){for(var i,s,o=e[0],c=e[1],l=e[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],i=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(i=!1)}i&&(n.splice(e--,1),t=s(s.s=r[0]))}return t}var i={},a={app:0},n=[];function s(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=i,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(r,i,function(e){return t[e]}.bind(null,i));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([9,"chunk-vendors"]),r()})({0:function(t,e){},"07bb":function(t,e,r){},"0981":function(t,e,r){},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},16:function(t,e){},17:function(t,e){},18:function(t,e){},19:function(t,e){},"19f3":function(t,e,r){"use strict";var i=r("f1b8"),a=r.n(i);a.a},"1fad":function(t,e,r){"use strict";var i=r("0981"),a=r.n(i);a.a},2:function(t,e){},20:function(t,e){},"22e7":function(t,e,r){"use strict";var i=r("65b3"),a=r.n(i);a.a},"28f2":function(t,e,r){"use strict";var i=r("8fa1"),a=r.n(i);a.a},3:function(t,e){},"3dee":function(t,e,r){},4:function(t,e){},"46e1":function(t,e,r){"use strict";var i=r("5cd6"),a=r.n(i);a.a},"478e":function(t,e,r){t.exports=r.p+"img/green-tick.8b795ba6.png"},"4c49":function(t,e,r){},5:function(t,e){},5355:function(t,e,r){"use strict";var i=r("d768"),a=r.n(i);a.a},5425:function(t,e,r){},"555a":function(t,e,r){t.exports=r.p+"img/icon.7931bf0c.png"},5619:function(t){t.exports=JSON.parse('{"NODE_ENV":"$NODE_ENV","TITLE":"$VUE_APP_TITLE","DESC":"$VUE_APP_DESC","VERSION":"$VUE_APP_VERSION","STUDIO_SERVER_BASE_URL":"$VUE_APP_STUDIO_SERVER_BASE_URL","STUDIO_SERVER_BASE_WS":"$VUE_APP_STUDIO_SERVER_BASE_WS","NODE_SERVER_BASE_URL":"$VUE_APP_NODE_SERVER_BASE_URL","NODE_SERVER_BASE_URL_REST":"$VUE_APP_NODE_SERVER_BASE_URL_REST","SCHEMA_GET_EP_REST":"$VUE_APP_SCHEMA_GET_EP_REST","NODE_SERVER_DID_RERSOLVE_EP":"$VUE_APP_NODE_SERVER_DID_RERSOLVE_EP","ACCPCT_CRED_EP":"$VUE_APP_ACCPCT_CRED_EP","EXPLORER_BASE_URL":"$VUE_APP_EXPLORER_BASE_URL","STUDIO_SERVER_SAVE_SCHEMA":"$VUE_APP_STUDIO_SERVER_SAVE_SCHEMA","SCHEMA_LIST_EP":"$VUE_APP_SCHEMA_LIST_EP","STUDIO_SERVER_CRED_LIST_EP":"$VUE_APP_STUDIO_SERVER_CRED_LIST_EP","WEB_WALLET_ADDRESS":"$VUE_APP_WEB_WALLET_ADDRESS","PRESENTATION_TEMPLATE_EP":"$VUE_APP_PRESENTATION_TEMPLATE_EP"}')},"56d7":function(t,e,r){"use strict";r.r(e);var i=r("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("div",{staticClass:"row nav-style"},[r("div",{staticClass:"col-md-3"},[r("div",{staticClass:"form-group form-inline"},[r("img",{staticClass:"logo-style",attrs:{src:"https://thumb.tildacdn.com/tild3065-3765-4865-b331-393637653931/-/resize/150x/-/format/webp/hypersign_Yellow.png"}}),r("h4",{staticClass:"subtitle"},[r("span",{staticStyle:{opacity:"0.4"}},[t._v("|")]),t._v(" "+t._s(t.$config.app.name)+" ("+t._s(t.$config.app.version)+")")])])]),r("div",{staticClass:"col-md-3"},[t.isShow?r("OrgDropDown",{staticStyle:{"padding-top":"12px"}}):t._e()],1),t.authRoutes.includes(t.$router.history.current.name)?t._e():r("div",{staticClass:"col-md-6   rightAlign",staticStyle:{"padding-top":"12px"}},t._l(t.getMenu(),(function(e){return e.isShow?r("button",{key:e.name,staticClass:"btn btn-light btn-sm",attrs:{type:"button"},on:{click:function(r){return t.goToNextPage(e.name)}}},[t._v(t._s(e.name))]):t._e()})),0)]),r("router-view"),r("notifications",{attrs:{group:"foo"}})],1)},n=[],s=r("a34a"),o=r.n(s),c={methods:{shorten:function(t){if(!t||"undefined"===t)return"";if(t.length<=8)return t;var e=t.substr(0,8),r="...",i=t.substr(t.length-8,8);return e+r+i},fetchData:function(t,e){var r=this;fetch(t).then((function(t){return t.json()})).then((function(t){if(200!=t.status)throw new Error(t.error);return t.message})).catch((function(t){return r.notifyErr("Error: ".concat(t.message))}))},notifySuccess:function(t){this.$notify({group:"foo",title:"Information",type:"success",text:t})},notifyErr:function(t){this.$notify({group:"foo",title:"Error",type:"error",text:t})}}},l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dropdown"},[r("select",{staticClass:"custom-select",staticStyle:{width:"150px"},on:{change:function(e){return t.switchOrg(e)}}},[r("option",{domProps:{selected:!0,value:t.selectedOrg._id}},[t._v(t._s(t.selectedOrg.name))]),t._l(t.orgList,(function(e){return r("option",{domProps:{value:e._id}},[t._v(t._s(e.name))])}))],2)])},u=[],d={computed:{orgList:function(){return this.$store.state.orgList},selectedOrg:function(){return this.$store.getters.getSelectedOrg}},methods:{switchOrg:function(t){this.$store.commit("selectAnOrg",t.target.value),this.$store.dispatch("fetchAllOrgDataOnOrgSelect",t.target.value)}}},p=d,h=r("2877"),m=Object(h["a"])(p,l,u,!1,null,null,null),f=m.exports,g=new i["default"],v=g;function _(t,e,r,i,a,n,s){try{var o=t[n](s),c=o.value}catch(l){return void r(l)}o.done?e(c):Promise.resolve(c).then(i,a)}function S(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var n=t.apply(e,r);function s(t){_(n,i,a,s,o,"next",t)}function o(t){_(n,i,a,s,o,"throw",t)}s(void 0)}))}}var E={components:{OrgDropDown:f},computed:{isShow:function(){return this.$store.getters.isAnyOrgSelected},selectedOrg:function(){return this.$store.getters.getSelectedOrg}},data:function(){return{authToken:localStorage.getItem("authToken"),schema_page:1,authRoutes:["register","PKIIdLogin"],menu:[]}},mounted:function(){var t=S(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("Initiating mounted with schema and credentials"),v.$on("initializeStore",this.initializeStore),this.initializeStore("login");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{initializeStore:function(t){console.log(t),this.authToken=localStorage.getItem("authToken"),this.authToken?(this.fetchAllOrgs(),console.log("Fetched all orgs")):console.log("else")},getMenu:function(){var t=[{name:"Dashboard",path:"/studio/dashboard",isShow:!0},{name:"Organization",path:"/studio/org",isShow:!0},{name:"Schema",path:"/studio/schema",isShow:this.isShow},{name:"Credentials",path:"/studio/credential",isShow:this.isShow},{name:"Presentation",path:"/studio/presentation",isShow:this.isShow},{name:"Logout",path:"/login",isShow:!0}];return console.log(this.isShow),t},vcStatus:function(t){return fetch(t+":").then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){Promise.reject(t.message)}))},fetchAllOrgs:function(){var t=this,e="".concat(this.$config.studioServer.BASE_URL,"api/v1/org/all"),r={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)};fetch(e,{headers:r}).then((function(t){return t.json()})).then((function(e){var r=e.org;r&&r.forEach((function(e){t.$store.commit("insertAnOrg",e)})),r&&r.length>0&&(console.log(r),t.$store.commit("selectAnOrg",r[0]._id),t.$store.dispatch("fetchAllOrgDataOnOrgSelect",r[0]._id))}))},fetchTemplates:function(){var t=this,e="".concat(this.$config.studioServer.BASE_URL,"api/v1/presentation/template/").concat(this.selectedOrg._id,"/"),r={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)};fetch(e,{headers:r}).then((function(t){return t.json()})).then((function(e){e.forEach((function(e){t.$store.commit("insertApresentationTemplate",e)}))}))},getList:function(){var t=S(o.a.mark((function t(e){var r,i,a,n,s,c=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r="",i={},"SCHEMA"===e?(r="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.SCHEMA_LIST_EP,"/").concat(this.selectedOrg._id,"/?page=").concat(this.schema_page,"&limit=10"),i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)}}):(r="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.CRED_LIST_EP,"/").concat(this.selectedOrg._id),i={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)}}),t.next=5,fetch(r,i);case 5:return a=t.sent,t.next=8,a.json();case 8:if(n=t.sent,!n||500!=n.status){t.next=11;break}return t.abrupt("return",this.notifyErr("Error:  ".concat(n.error)));case 11:"SCHEMA"===e?(console.log(n),s=n.schemaList,s.forEach((function(t){c.$store.dispatch("insertAschema",t)}))):n.credList.forEach((function(t){c.$store.dispatch("insertAcredential",t)}));case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),logout:function(){localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("credentials"),localStorage.removeItem("userData"),this.$store.commit("resetStore")},goToNextPage:function(t){var e=this.getMenu().find((function(e){return e.name===t}));"Logout"===e.name&&this.logout(),this.$router.push(e.path),null!=this.$route.params.nextUrl?this.$router.push(this.$route.params.nextUrl):this.$router.push(e.path)}},mixins:[c]},b=E,y=(r("a5a6"),r("b0a0"),Object(h["a"])(b,a,n,!1,null,"1cd5b1ea",null)),P=y.exports,C=r("8c4f"),A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row",staticStyle:{"align-content":"center"}},[r("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}}),r("div",{staticClass:"col-md-3",staticStyle:{"font-size":"small",color:"grey",margin:"0 auto"}},[r("b-card",{staticStyle:{padding:"40px"},attrs:{"no-body":""}},[r("div",{staticClass:"form-group center"},[r("h4",[t._v("Login")])]),r("hr"),r("div",{staticClass:"form-group center"},[r("vue-qr",{attrs:{margin:"1",text:t.qr_data,size:250,logoSrc:t.src}})],1),r("div",{staticClass:"form-group centeralign"},[t._v("\n        Scan the QR code\n      ")]),r("div",{staticClass:"form-group center"},[r("h5",[r("span",[t._v("Or")])])]),r("div",{staticClass:"form-group center"},[""!=this.value?r("a",{staticClass:"btn btn-hypersign  button-theme",style:t.buttonThemeCss,attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openWallet()}}},[r("div",{staticStyle:{"font-size":"smaller",padding:"10px"}},[t._v("\n                  Click To Login\n                ")])]):t._e()])])],1)],1)},O=[],w=r("d7b0"),R=r("658f"),T=r.n(R),D=r("41aa"),L=r.n(D),U=r("522b");console.log(Object({NODE_ENV:"production",VUE_APP_TITLE:"Entity Studio",VUE_APP_DESC:"A portal to issue and verify credentials on Hypersign Identity network!",VUE_APP_VERSION:"v1.0",VUE_APP_STUDIO_SERVER_BASE_URL:"https://stage.hypermine.in/studioserver/",VUE_APP_STUDIO_SERVER_BASE_WS:"wss://stage.hypermine.in/studioserverws/",VUE_APP_NODE_SERVER_BASE_URL:"https://jagrat.hypersign.id/rpc/",VUE_APP_NODE_SERVER_BASE_URL_REST:"https://jagrat.hypersign.id/rest/",VUE_APP_SCHEMA_GET_EP_REST:"hypersign-protocol/hidnode/ssi/schema/",VUE_APP_NODE_SERVER_DID_RERSOLVE_EP:"hypersign-protocol/hidnode/ssi/did/",VUE_APP_ACCPCT_CRED_EP:"api/v1/credential/accepct",VUE_APP_EXPLORER_BASE_URL:"https://explorer.hypersign.id/",VUE_APP_STUDIO_SERVER_SAVE_SCHEMA:"api/v1/schema/issue",VUE_APP_SCHEMA_LIST_EP:"api/v1/schema/get",VUE_APP_STUDIO_SERVER_CRED_LIST_EP:"api/v1/credential/list",VUE_APP_WEB_WALLET_ADDRESS:"https://wallet-stage.hypersign.id",VUE_APP_PRESENTATION_TEMPLATE_EP:"api/v1/presentation/template",BASE_URL:"/"}));var x={studioServer:{SCHEMA_SSE:"".concat(Object({NODE_ENV:"production",VUE_APP_TITLE:"Entity Studio",VUE_APP_DESC:"A portal to issue and verify credentials on Hypersign Identity network!",VUE_APP_VERSION:"v1.0",VUE_APP_STUDIO_SERVER_BASE_URL:"https://stage.hypermine.in/studioserver/",VUE_APP_STUDIO_SERVER_BASE_WS:"wss://stage.hypermine.in/studioserverws/",VUE_APP_NODE_SERVER_BASE_URL:"https://jagrat.hypersign.id/rpc/",VUE_APP_NODE_SERVER_BASE_URL_REST:"https://jagrat.hypersign.id/rest/",VUE_APP_SCHEMA_GET_EP_REST:"hypersign-protocol/hidnode/ssi/schema/",VUE_APP_NODE_SERVER_DID_RERSOLVE_EP:"hypersign-protocol/hidnode/ssi/did/",VUE_APP_ACCPCT_CRED_EP:"api/v1/credential/accepct",VUE_APP_EXPLORER_BASE_URL:"https://explorer.hypersign.id/",VUE_APP_STUDIO_SERVER_SAVE_SCHEMA:"api/v1/schema/issue",VUE_APP_SCHEMA_LIST_EP:"api/v1/schema/get",VUE_APP_STUDIO_SERVER_CRED_LIST_EP:"api/v1/credential/list",VUE_APP_WEB_WALLET_ADDRESS:"https://wallet-stage.hypersign.id",VUE_APP_PRESENTATION_TEMPLATE_EP:"api/v1/presentation/template",BASE_URL:"/"}).VUE_APP_SSE,"api/v1/schema/sse/"),CRED_SSE:"".concat(Object({NODE_ENV:"production",VUE_APP_TITLE:"Entity Studio",VUE_APP_DESC:"A portal to issue and verify credentials on Hypersign Identity network!",VUE_APP_VERSION:"v1.0",VUE_APP_STUDIO_SERVER_BASE_URL:"https://stage.hypermine.in/studioserver/",VUE_APP_STUDIO_SERVER_BASE_WS:"wss://stage.hypermine.in/studioserverws/",VUE_APP_NODE_SERVER_BASE_URL:"https://jagrat.hypersign.id/rpc/",VUE_APP_NODE_SERVER_BASE_URL_REST:"https://jagrat.hypersign.id/rest/",VUE_APP_SCHEMA_GET_EP_REST:"hypersign-protocol/hidnode/ssi/schema/",VUE_APP_NODE_SERVER_DID_RERSOLVE_EP:"hypersign-protocol/hidnode/ssi/did/",VUE_APP_ACCPCT_CRED_EP:"api/v1/credential/accepct",VUE_APP_EXPLORER_BASE_URL:"https://explorer.hypersign.id/",VUE_APP_STUDIO_SERVER_SAVE_SCHEMA:"api/v1/schema/issue",VUE_APP_SCHEMA_LIST_EP:"api/v1/schema/get",VUE_APP_STUDIO_SERVER_CRED_LIST_EP:"api/v1/credential/list",VUE_APP_WEB_WALLET_ADDRESS:"https://wallet-stage.hypersign.id",VUE_APP_PRESENTATION_TEMPLATE_EP:"api/v1/presentation/template",BASE_URL:"/"}).VUE_APP_SSE,"api/v1/credential/sse/"),ORG_SSE:"".concat(Object({NODE_ENV:"production",VUE_APP_TITLE:"Entity Studio",VUE_APP_DESC:"A portal to issue and verify credentials on Hypersign Identity network!",VUE_APP_VERSION:"v1.0",VUE_APP_STUDIO_SERVER_BASE_URL:"https://stage.hypermine.in/studioserver/",VUE_APP_STUDIO_SERVER_BASE_WS:"wss://stage.hypermine.in/studioserverws/",VUE_APP_NODE_SERVER_BASE_URL:"https://jagrat.hypersign.id/rpc/",VUE_APP_NODE_SERVER_BASE_URL_REST:"https://jagrat.hypersign.id/rest/",VUE_APP_SCHEMA_GET_EP_REST:"hypersign-protocol/hidnode/ssi/schema/",VUE_APP_NODE_SERVER_DID_RERSOLVE_EP:"hypersign-protocol/hidnode/ssi/did/",VUE_APP_ACCPCT_CRED_EP:"api/v1/credential/accepct",VUE_APP_EXPLORER_BASE_URL:"https://explorer.hypersign.id/",VUE_APP_STUDIO_SERVER_SAVE_SCHEMA:"api/v1/schema/issue",VUE_APP_SCHEMA_LIST_EP:"api/v1/schema/get",VUE_APP_STUDIO_SERVER_CRED_LIST_EP:"api/v1/credential/list",VUE_APP_WEB_WALLET_ADDRESS:"https://wallet-stage.hypersign.id",VUE_APP_PRESENTATION_TEMPLATE_EP:"api/v1/presentation/template",BASE_URL:"/"}).VUE_APP_SSE,"api/v1/org/sse/"),BASE_URL:"https://stage.hypermine.in/studioserver/",ACCPCT_CRED_EP:"api/v1/credential/accepct",SAVE_SCHEMA_EP:"api/v1/schema/issue",CRED_LIST_EP:"api/v1/credential/list",SCHEMA_LIST_EP:"api/v1/schema/get",CRED_ISSUE_EP:L.a.value("STUDIO_SERVER_CRED_ISSUE_EP")||"api/v1/credential/issue",AUTH_CHALLENGE_EP:L.a.value("STUDIO_SERVER_AUTH_CHALLENGE_EP")||"api/auth/challenge",AUTH_LOGIN_EP:L.a.value("STUDIO_SERVER_AUTH_LOGIN_EP")||"api/auth/login",PRESENTATION_TEMPLATE_EP:"api/v1/presentation/template"},nodeServer:{BASE_URL:"https://jagrat.hypersign.id/rpc/",BASE_URL_REST:"https://jagrat.hypersign.id/rest/",SCHEMA_GET_REST:"hypersign-protocol/hidnode/ssi/schema/",NETWORK_STATUS_EP:L.a.value("NODE_SERVER_NETWORK_STATUS_EP")||"net_info",SCHEMA_LIST_EP:L.a.value("NODE_SERVER_SCHEMA_LIST_EP")||"api/schema/list",SCHEMA_GET_EP:L.a.value("NODE_SERVER_SCHEMA_GET_EP")||"api/schema/get",SCHEMA_CREATE_EP:L.a.value("NODE_SERVER_SCHEMA_CREATE_EP")||"api/schema/create",DID_RESOLVE_EP:L.a.value("NODE_SERVER_DID_RERSOLVE_EP")||"hypersign-protocol/hidnode/ssi/did/"},explorer:{BASE_URL:L.a.value("EXPLORER_BASE_URL"),NEW_DID_EP:L.a.value("EXPLORER_NEW_DID_EP")||"newdid"},app:{name:L.a.value("TITLE")||"Hypersign Studio",decription:L.a.value("DESC"),version:L.a.value("VERSION")}},I="wss://stage.hypermine.in/studioserverws/",N="https://wallet-stage.hypersign.id",k={nodeUrl:x.nodeServer.BASE_URL,didScheme:"did:hs"},$={did:U.did(k),credential:U.credential(k)};x["appName"]="Studio",x["hypersignSDK"]=$,x["websocketUrl"]=I,x["webWalletAddress"]=N;var V=x,j=r("9062"),B=r.n(j),H=(r("e40d"),void 0);function M(t,e,r,i,a,n,s){try{var o=t[n](s),c=o.value}catch(l){return void r(l)}o.done?e(c):Promise.resolve(c).then(i,a)}function W(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var n=t.apply(e,r);function s(t){M(n,i,a,s,o,"next",t)}function o(t){M(n,i,a,s,o,"throw",t)}s(void 0)}))}}var q,F=V.hypersignSDK,J=r("e2c9"),z=(J.sha256hashStr,{name:"Login",components:{QrcodeVue:w["a"],Loading:B.a,VueQr:T.a},data:function(){return{qr_data:{},src:r("555a"),active:0,username:"",password:"",host:location.hostname,challenge:"dddd",domain:location.host,QRCodeValue:this.$route.query,credentials:{},userData:{},user:{},verifiablePresentation:"",fullPage:!0,isLoading:!1,privateKey:"3isrtEJ4gt1ZHkdUYYph1WFAtzfqAL5WM6Hh1NC2hmWnDfBypXjt5oUFdAqQdiess2vqqQ3iF6x4fDVuvLw454sn",did:"did:hs:892325a4-75c9-465c-882b-91e3ca5143c3"}},created:function(){localStorage.clear(),document.title="".concat(V.appName," - Login"),this.connection=new WebSocket(this.$config.websocketUrl),console.log(this.$config.websocketUrl),this.connection.onopen=function(){console.log("Socket connection is open")},this.isLoading=!0;var t=this;this.connection.onmessage=function(e){var r=e.data,i=JSON.parse(r);if(console.log(i),"init"==i.op)t.isLoading=!1,i.data["provider"]="google",t.value=JSON.stringify(i.data),t.qr_data="".concat(t.$config.webWalletAddress,"/deeplink?url=").concat(t.value),console.log(t.qr_data);else if("end"==i.op){t.connection.close();var a=i.data.hypersign.data.accessToken,n=i.data.hypersign.data.refreshToken;localStorage.setItem("authToken",a),localStorage.setItem("refreshToken",n),v.$emit("initializeStore","login"),null!=localStorage.getItem("authToken")&&(this.walletWindow&&this.walletWindow.close(),null!=t.$route.params.nextUrl?t.$router.push(t.$route.params.nextUrl):t.$router.push("org"))}else"reload"==i.op&&(t.QRRefresh=!0,t.qr_data=null,t.connection.close(4001,i.data.clientId),t.$router.go())},this.connection.onerror=function(t){console.log("Websocket connection error ",t)}},mounted:function(){this.clean()},methods:{push:function(t){this.$router.push(t)},openWallet:function(){if(""!=this.value){var t="".concat(this.$config.webWalletAddress,"/deeplink?url=").concat(this.value);this.walletWindow=window.open(t,"popUpWindow","height=800,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes")}},clean:function(){localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("credentials"),localStorage.removeItem("userData")},notifySuccess:function(t){this.$notify({group:"foo",title:"Information",type:"success",text:t})},notifyErr:function(t){this.$notify({group:"foo",title:"Error",type:"error",text:t})},gotosubpage:function(t){H.$router.push("".concat(t))},generatePresentation:function(){var t=W(o.a.mark((function t(){var e,r,i,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=JSON.parse(localStorage.getItem("keys")),this.user.privateKey=e.privateKeyBase58,this.user.id=e.publicKey.id,this.user.did=this.user.id.split("#")[0],r=JSON.parse(localStorage.getItem("credential")),this.user.name=r["credentialSubject"]["Name"],this.user.email=r["credentialSubject"]["Email"],r){t.next=9;break}throw new Error("VC is null");case 9:return t.next=11,F.credential.generatePresentation(r,this.user.id);case 11:return i=t.sent,this.notifySuccess("Presentation generated"),t.next=15,F.credential.signPresentation(i,this.user.id,this.user.privateKey,this.challenge.challenge);case 15:a=t.sent,this.notifySuccess("Presentation signed"),this.verifiablePresentation=JSON.stringify(a),localStorage.removeItem("credential"),localStorage.removeItem("keys");case 20:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),downloadPresentation:function(){var t=W(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.generatePresentation();case 2:this.forceFileDownload(this.verifiablePresentation,"vp.json");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),forceFileDownload:function(t,e){var r=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=r,i.setAttribute("download",e),document.body.appendChild(i),i.click()},readFile:function(t,e){var r=new FileReader;r.onload=e,r.readAsText(t)},onFileChange:function(t){var e=t.target.files[0];this.readFile(e,this.onfileLoadSuccess)},onfileLoadSuccess:function(t){var e=JSON.parse(t.target.result);e||this.notifyErr("Incorrect file"),e["type"]&&e["type"].find((function(t){return"VerifiableCredential"==t}))?(localStorage.removeItem("credential"),localStorage.setItem("credential",JSON.stringify(e))):e["privateKeyBase58"]?(localStorage.removeItem("keys"),localStorage.setItem("keys",JSON.stringify(e))):this.notifyErr("Invalid file")},login:function(){var t=W(o.a.mark((function t(e){var r,i,a,n=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isLoading=!0,r="",i={"Content-Type":"application/json"},r="".concat(this.$config.studioServer.BASE_URL,"api/auth/login_pki?type=PKI"),i["x-auth-token"]=this.challenge.JWTChallenge,t.next=8,this.generatePresentation();case 8:a={fname:this.user.name,email:this.user.email,publicKey:this.user.did,proof:this.verifiablePresentation,challenge:this.challenge?this.challenge.challenge:"",domain:this.domain},console.log(".............before fetch"),fetch(r,{body:JSON.stringify(a),method:"POST",headers:i}).then((function(t){return t.json()})).then((function(t){if(n.isLoading=!1,t&&500==t.status)return n.notifyErr("Error:  ".concat(t.error));localStorage.setItem("authToken",t.message.jwtToken),t.message.user["privateKey"]=n.user.privateKey,localStorage.setItem("user",JSON.stringify(t.message.user)),null!=localStorage.getItem("authToken")&&(null!=n.$route.params.nextUrl?n.$router.push(n.$route.params.nextUrl):n.$router.push("dashboard"))})),t.next=19;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.clean(),this.isLoading=!1,this.notifyErr("Error: ".concat(t.t0.message));case 19:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(e){return t.apply(this,arguments)}return e}()}}),G=z,K=(r("5355"),Object(h["a"])(G,A,O,!1,null,"473ce4db",null)),Q=K.exports,X=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}}),r("div",{staticClass:"col-md-3",staticStyle:{"font-size":"small",color:"grey","margin-left":"36%"}},[r("form",{staticStyle:{padding:"6px"},attrs:{action:"#"}},[r("b-card",{staticStyle:{padding:"40px"},attrs:{"no-body":""}},[r("h4",[t._v("Sign Up")]),r("hr"),r("div",{staticClass:"row"},[r("form",{staticClass:"col-md-12",attrs:{action:"#"}},[r("div",{staticClass:"form-group"},[r("label",{staticClass:"floatLeft"},[t._v("Name:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.fullName,expression:"fullName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter name"},domProps:{value:t.fullName},on:{input:function(e){e.target.composing||(t.fullName=e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"floatLeft"},[t._v("Email:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Enter email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"floatLeft"},[t._v("Hypersign DID ("),r("a",{attrs:{href:""+t.$config.explorer.BASE_URL,target:"_blank"}},[t._v("Get a DID")]),t._v("):")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.did,expression:"did"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter DID (did:hs:...)"},domProps:{value:t.did},on:{input:function(e){e.target.composing||(t.did=e.target.value)}}})])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-sm-3",attrs:{hidden:""}},[r("button",{staticClass:"btn btn-primary btn-sm floatLeft",attrs:{type:"button","data-toggle":"modal"},on:{click:function(e){return t.downloadPresentation()}}},[t._v("View Proof")])]),r("div",{staticClass:"col-sm-3"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-toggle":"modal"},on:{click:function(e){return t.signup()}}},[t._v("Signup")])]),r("div",{staticClass:"col-md-9 floatRight"},[t._v("\n            Back to\n            "),r("a",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(e){return t.push("login")}}},[t._v("Login")])])])])],1)])],1)},Y=[],Z=r("a18f"),tt=r.n(Z),et=void 0;function rt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function it(t,e,r,i,a,n,s){try{var o=t[n](s),c=o.value}catch(l){return void r(l)}o.done?e(c):Promise.resolve(c).then(i,a)}function at(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var n=t.apply(e,r);function s(t){it(n,i,a,s,o,"next",t)}function o(t){it(n,i,a,s,o,"throw",t)}s(void 0)}))}}var nt=r("e2c9"),st=(nt.sha256hashStr,q={name:"Register",components:{}},rt(q,"components",{Loading:B.a}),rt(q,"data",(function(){return{active:0,fullName:"",email:"",phno:"",publicKey:"",username:"",password:"",host:location.hostname,keys:{},did:"",isLoading:!1,fullPage:!0}})),rt(q,"created",(function(){})),rt(q,"methods",{push:function(t){this.$router.push(t)},gotosubpage:function(t){et.$router.push("".concat(t))},notifySuccess:function(t){this.$notify({group:"foo",title:"Information",type:"success",text:t})},notifyErr:function(t){this.$notify({group:"foo",title:"Error",type:"error",text:t})},signup:function(){var t=at(o.a.mark((function t(){var e,r,i,a;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isLoading=!0,t.prev=1,""!=this.email&&""!=this.name&&""!=this.did){t.next=4;break}throw new Error("All fields are mandatory");case 4:return e={fname:this.fullName,email:this.email,publicKey:this.did},r="".concat(this.$config.studioServer.BASE_URL,"api/auth/register"),t.next=8,tt()(r,{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}});case 8:return i=t.sent,t.next=11,i.json();case 11:if(a=t.sent,500!=a.status){t.next=15;break}throw this.isLoading=!1,new Error(a.error);case 15:this.isLoading=!1,alert("An email has been sent to you. Please click on the link to verify and download HypersignAuth credentials."),this.isLoading=!1,this.$router.push("login"),t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](1),this.isLoading=!1,this.notifyErr(t.t0.message);case 25:case"end":return t.stop()}}),t,this,[[1,21]])})));function e(){return t.apply(this,arguments)}return e}()}),q),ot=st,ct=(r("19f3"),Object(h["a"])(ot,X,Y,!1,null,"c9b8fd9e",null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12",staticStyle:{"text-align":"left"}},[r("Info",{attrs:{message:t.description}}),r("div",{staticClass:"form-group",staticStyle:{"text-align":"right"}},[r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openSlider()}}},[t._v("+ Credential")])]),r("StudioSideBar",{attrs:{title:"Issue Credential"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"form-group row"},[r("div",{staticClass:"col-md-12"},[r("form",{staticStyle:{"max-height":"300px",overflow:"auto",padding:"5px"}},[r("div",{staticClass:"form-group"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.holderDid,expression:"holderDid"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Issued To (did:hs:...)"},domProps:{value:t.holderDid},on:{input:function(e){e.target.composing||(t.holderDid=e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("b-form-select",{staticClass:"mt-3",attrs:{options:t.selectOptions,size:"md"},on:{change:function(e){return t.OnSchemaSelectDropDownChange(e)}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),t._l(t.issueCredAttributes,(function(e){return r("div",{key:e.name,staticClass:"form-group"},[r("label",{attrs:{for:"schDescription"}},[r("strong",[t._v(t._s(e.name))])]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"attr.value"}],staticClass:"form-control",attrs:{type:"text",id:"schemaName","aria-describedby":"schemaNameHelp",placeholder:"Enter attribute value"},domProps:{value:e.value},on:{input:function(r){r.target.composing||t.$set(e,"value",r.target.value)}}})])}))],2)])]),r("div",{staticClass:"form-group row"},[r("div",{staticClass:"col-md-12"},[r("hr"),r("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.issueCredential()}}},[t._v("Issue")])])])])])],1)]),t.vcList.length>0?r("div",{staticClass:"row",staticStyle:{"margin-top":"2%"}},[r("div",{staticClass:"col-md-12"},[r("table",{staticClass:"table table-bordered",staticStyle:{background:"#FFFF"}},[t._m(0),r("tbody",t._l(t.vcList,(function(e){return r("tr",{key:e.vc_id},[r("td",[e.vc_id?r("a",{attrs:{href:e.vc_id+":",target:"_blank>"}},[t._v(t._s(t.shorten(e.vc_id)))]):t._e(),r("span",[t._v("-")])]),r("td",[r("a",{attrs:{href:""+t.$config.nodeServer.BASE_URL_REST+t.$config.nodeServer.SCHEMA_GET_REST+e.schemaId+":",target:"_blank"}},[t._v(t._s(t.shorten(e.schemaId)))])]),r("td",[t._v(t._s(e.subjectDid))]),r("td",[t._v(t._s(e.credStatus?e.credStatus.issuanceDate:"-"))]),r("td",[t._v(t._s(e.credStatus?e.credStatus.expirationDate:"-"))]),r("td",[t._v(" "+t._s(e.credStatus?e.credStatus.claim.currentStatus:e.status))]),r("td",[t._v(t._s(e.credStatus?e.credStatus.claim.statusReason:"-"))]),r("td",[e.credStatus?r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(r){return t.generateCred(""+e._id)}}},[t._v("Send")]):r("span",[t._v("-")])])])})),0)]),r("hf-pop-up",{attrs:{Header:"Accept Credential URL"}},[r("Info",{attrs:{message:"Copy and send this URL to the credential owner so that they can accept in their wallet"}}),r("p",{staticStyle:{"max-width":"500px","word-wrap":"break-word"}},[t._v(t._s(t.credUrl))])],1)],1)]):r("div",{staticClass:"form-group"},[r("h2",[t._v("Issue your first credential!")])])],1)},dt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-light"},[r("tr",[r("th",[t._v("VC Id")]),r("th",[t._v("Schema Id")]),r("th",[t._v("Holder DID")]),r("th",[t._v("Issuance Date")]),r("th",[t._v("Expiration Date")]),r("th",[t._v("Status")]),r("th",[t._v("Status Reason")]),r("th")])])}],pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("p",{staticClass:"message"},[t._v("\n    "+t._s(t.message)+"\n")])},ht=[],mt={name:"Info",props:["message"],mounted:function(){}},ft=mt,gt=(r("7899"),Object(h["a"])(ft,pt,ht,!1,null,"7080b038",null)),vt=gt.exports,_t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{ref:"modal-1",attrs:{"hide-footer":"",title:t.Header,centered:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._t("default")],2)},St=[],Et={data:function(){return{show:!1}},props:{Header:{type:String,require:!0}},created:function(){this.openModal(),this.closeModal()},methods:{openModal:function(){var t=this;this.$root.$on("modal-show",(function(){t.show=!0}))},closeModal:function(){var t=this;this.$root.$on("modal-close",(function(){t.show=!1}))}}},bt=Et,yt=Object(h["a"])(bt,_t,St,!1,null,null,null),Pt=yt.exports,Ct=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-sidebar",{attrs:{id:"sidebar-right",width:"40%",title:t.title,right:"",shadow:"",backdrop:""}},[t._t("default")],2)],1)},At=[],Ot={props:{title:{type:String,required:!0}}},wt=Ot,Rt=Object(h["a"])(wt,Ct,At,!1,null,null,null),Tt=Rt.exports;function Dt(t,e,r,i,a,n,s){try{var o=t[n](s),c=o.value}catch(l){return void r(l)}o.done?e(c):Promise.resolve(c).then(i,a)}function Lt(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var n=t.apply(e,r);function s(t){Dt(n,i,a,s,o,"next",t)}function o(t){Dt(n,i,a,s,o,"throw",t)}s(void 0)}))}}function Ut(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var xt={name:"IssueCredential",components:{Info:vt,HfPopUp:Pt,Loading:B.a,StudioSideBar:Tt},computed:{vcList:function(){return this.$store.state.vcList},selectOptions:function(){return this.$store.getters.listOfAllSchemaOptions},selectedOrg:function(){return this.$store.getters.getSelectedOrg}},data:function(){var t;return t={authToken:localStorage.getItem("authToken"),description:'An issuer can issue a credential to a subject (or holder) which can be verfied by the verifier independently, without having him to connect with the issuer. They are a part of our daily lives; driver\'s licenses are used to assert that we are capable of operating a motor vehicle, university degrees can be used to assert our level of education, and government-issued passports enable us to travel between countries.  For example: an airline company can issue a flight ticket ("verfiable credential") using schema (issued by DGCA) to the passenger.',active:0,host:location.hostname,user:{},prevRoute:null,attributeName:"",attributes:[],issueCredAttributes:[],radioSelected:"create",credentialName:"",isCredentialIssued:!1,signedVerifiableCredential:"",credentials:JSON.parse(localStorage.getItem("credentials")),subjectDid:"did:hs:AmitKumar",radioOptions:[{text:"Create new schema",value:"create"},{text:"Select existing schema",value:"existing"}],selected:null,attributeValues:{}},Ut(t,"authToken",localStorage.getItem("authToken")),Ut(t,"vcCredStatusMap",{}),Ut(t,"schemaList",[]),Ut(t,"fullPage",!0),Ut(t,"isLoading",!1),Ut(t,"holderDid",""),Ut(t,"schema_page",1),Ut(t,"credUrl",""),Ut(t,"QrData",{QRType:"ISSUE_CREDENTIAL",serviceEndpoint:"",schemaId:"",appDid:"",appName:"Hypersign Studio",challenge:"",provider:"",data:""}),t},created:function(){var t=localStorage.getItem("user");this.user=JSON.parse(t)},beforeRouteEnter:function(t,e,r){r((function(t){t.prevRoute=e}))},methods:{openSlider:function(){this.$root.$emit("bv::toggle::collapse","sidebar-right")},ssePopulateCredStatus:function(t,e){var r=new EventSource("".concat(this.$config.studioServer.CRED_SSE).concat(t));r.onmessage=function(t){var i=JSON.parse(t.data);console.log(i),"Registered"!==i.status&&"Failed"!==i.status||(r.close(),e.dispatch("insertAcredential",i))},r.onopen=function(t){console.log("Connection to server opened.",t)},r.onerror=function(t){console.log(t),r.close()}},generateCred:function(){var t=Lt(o.a.mark((function t(e){var r,i,a,n,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={id:e},i={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)},a=this.$config.studioServer.BASE_URL+this.$config.studioServer.ACCPCT_CRED_EP,t.next=5,tt()(a,i);case 5:return n=t.sent,t.next=8,n.json();case 8:s=t.sent,this.credUrl=s.url,this.$root.$emit("modal-show"),this.notifySuccess("Cred Url Generated Successfully");case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),openWallet:function(t){""!=t&&(this.walletWindow=window.open("".concat(t),"popUpWindow","height=800,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes"))},OnSchemaSelectDropDownChange:function(t){if(t){this.issueCredAttributes=[];var e=this.issueCredAttributes.length,r=this.$store.getters.findSchemaBySchemaID(t),i=r.schemaDetails.schema.properties;for(var a in i)this.issueCredAttributes.push({id:e+t,type:a.type,name:a,required:!0===a.required,value:""})}else this.issueCredAttributes=[]},forceFileDownload:function(t,e){var r=window.URL.createObjectURL(new Blob([t])),i=document.createElement("a");i.href=r,i.setAttribute("download",e),document.body.appendChild(i),i.click()},downloadCredentials:function(){this.forceFileDownload(JSON.stringify(this.signedVerifiableCredential),"vc.json")},generateAttributeMap:function(){var t=[];return this.issueCredAttributes.length>0&&this.issueCredAttributes.forEach((function(e){t[e.name]=e.value})),console.log(t),t},issueCredential:function(){var t=Lt(o.a.mark((function t(){var e,r,i,a,n,s,c,l,u=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.isLoading=!0,""!=this.holderDid){t.next=4;break}throw new Error("Please enter the holder did");case 4:if(null!=this.selected){t.next=6;break}throw new Error("Please select a schema");case 6:return t.next=8,this.generateAttributeMap();case 8:e=t.sent,r=Object.assign({},e),i=this.selected,a=this.user.id,n=this.holderDid,s="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.CRED_ISSUE_EP),c={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)},l={fields:r,schemaId:i,issuerDid:a,subjectDid:n,orgDid:this.$store.state.selectedOrgDid},this.QrData.data=l,tt()(s,{method:"POST",headers:c,body:JSON.stringify({QR_DATA:this.QrData})}).then((function(t){return t.json()})).then((function(t){var e=t.QR_DATA,r=t.creadRecord;u.$store.dispatch("insertAcredential",r);var i="".concat(u.$config.webWalletAddress,"/deeplink?url=").concat(JSON.stringify(e));u.openWallet(i),u.ssePopulateCredStatus(r._id,u.$store),u.openSlider()})),t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](0),this.isLoading=!1,this.notifyErr("Error: ".concat(t.t0.message));case 24:return t.prev=24,this.isLoading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,this,[[0,20,24,27]])})));function e(){return t.apply(this,arguments)}return e}()},mixins:[c]},It=xt,Nt=(r("46e1"),Object(h["a"])(It,ut,dt,!1,null,"f7c9be50",null)),kt=Nt.exports,$t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12",staticStyle:{"text-align":"left"}},[r("Info",{attrs:{message:t.description}}),r("div",{staticClass:"form-group",staticStyle:{"text-align":"right"}},[r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openSlider()}}},[t._v("+ Presentation Template")])]),r("StudioSideBar",{attrs:{title:"Create Presentation Template"}},[r("div",{staticClass:"form-group row container"},[r("div",{staticClass:"col-md-12"},[r("form",[r("div",{staticClass:"form-group"},[r("label",{staticClass:"floatLeft"},[t._v("Domain :")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.domain,expression:"presentationTemplate.domain"}],staticClass:"form-control",attrs:{type:"url"},domProps:{value:t.presentationTemplate.domain},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"domain",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"floatLeft"},[t._v("Name (optional):")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.name,expression:"presentationTemplate.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.presentationTemplate.name},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"name",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"floatLeft"},[t._v("IssuerDid")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.issuerDid,expression:"presentationTemplate.issuerDid"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.presentationTemplate.issuerDid},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"issuerDid",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"floatLeft"},[t._v("Schema Id :")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.schemaId,expression:"presentationTemplate.schemaId"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.presentationTemplate.schemaId},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"schemaId",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"floatLeft"},[t._v("Reason :")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.reason,expression:"presentationTemplate.reason"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.presentationTemplate.reason},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"reason",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"floatLeft"},[t._v("Callback URI")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.callbackUrl,expression:"presentationTemplate.callbackUrl"}],staticClass:"form-control",attrs:{type:"url"},domProps:{value:t.presentationTemplate.callbackUrl},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"callbackUrl",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"floatLeft "},[t._v("Required :")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.required,expression:"presentationTemplate.required"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.presentationTemplate.required)?t._i(t.presentationTemplate.required,null)>-1:t.presentationTemplate.required},on:{change:function(e){var r=t.presentationTemplate.required,i=e.target,a=!!i.checked;if(Array.isArray(r)){var n=null,s=t._i(r,n);i.checked?s<0&&t.$set(t.presentationTemplate,"required",r.concat([n])):s>-1&&t.$set(t.presentationTemplate,"required",r.slice(0,s).concat(r.slice(s+1)))}else t.$set(t.presentationTemplate,"required",a)}}})])]),r("hr"),r("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.generatePresentation()}}},[t._v("Generate")])])])])],1)]),t.templateList.length>0?r("div",{staticClass:"row",staticStyle:{"margin-top":"2%"}},[r("div",{staticClass:"col-md-12"},[r("table",{staticClass:"table table-bordered",staticStyle:{background:"#FFFF"}},[t._m(0),r("tbody",t._l(t.templateList,(function(e){return r("tr",{key:e},[r("td",[t._v(t._s(e._id))]),r("td",[t._v(t._s(e.domain))]),r("td",[t._v(t._s(e.name))]),r("td",[t._v(t._s(e.issuerDid.toString()))]),r("td",[t._v(t._s(t.shorten(e.schemaId)))]),r("td",[t._v(t._s(e.reason))]),r("td",[t._v(t._s(e.callbackUrl))])])})),0)])])]):r("div",{staticClass:"form-group"},[r("h2",[t._v("Create your first presentation template!")])])],1)},Vt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-light"},[r("tr",[r("th",[t._v("Template Id ")]),r("th",[t._v("Domain")]),r("th",[t._v("Name")]),r("th",[t._v("Issuer DID")]),r("th",[t._v("Schema Id")]),r("th",[t._v("Reason")]),r("th",[t._v("CallbackUrl")])])])}],jt=void 0;function Bt(t,e,r,i,a,n,s){try{var o=t[n](s),c=o.value}catch(l){return void r(l)}o.done?e(c):Promise.resolve(c).then(i,a)}function Ht(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var n=t.apply(e,r);function s(t){Bt(n,i,a,s,o,"next",t)}function o(t){Bt(n,i,a,s,o,"throw",t)}s(void 0)}))}}var Mt=V.hypersignSDK,Wt={name:"Presentation",components:{QrcodeVue:w["a"],Info:vt,StudioSideBar:Tt},computed:{templateList:function(){return this.$store.state.templateList},selectedOrg:function(){return this.$store.getters.getSelectedOrg}},data:function(){return{description:"The subject (or holder) generates verifiable presentation from one or more verifiable       credentials, issued by one or more issuers, that is shared with a specific verifier.       A verifiable presentation is a tamper-evident presentation encoded in such a way that       authorship of the data can be trusted after a process of cryptographic verification.       Certain types of verifiable presentations might contain data that is synthesized from,       but do not contain, the original verifiable credentials for example, in order to proof the       subject that he/she is an adult, she/he does not have to tell his/her actual age       (i.e. Zero knowledge proof). The airline passenger might not have to show the complete ticket      to the secruity personal to pass the security check. The passenger will have ability to show       just one document (the verifiable presentation) derived from his passport and air ticket to      show at the security check.",presentationTemplate:{queryType:"QueryByExample",domain:"",name:"",issuerDid:"",schemaId:"",reason:"",required:!0,callbackUrl:""},active:0,host:location.hostname,user:{},prevRoute:null,attributeName:"",attributes:[],issueCredAttributes:[],radioSelected:"create",credentialName:"",isCredentialIssued:!1,signedVerifiableCredential:"",credentials:JSON.parse(localStorage.getItem("credentials")),subjectDid:"did:hs:AmitKumar",radioOptions:[{text:"Create new schema",value:"create"},{text:"Select existing schema",value:"existing"}],selected:null,attributeValues:{},authToken:localStorage.getItem("authToken"),selectOptions:[{value:null,text:"Please select a schema"}],schemaMap:{},vcList:[],schemaList:[],fullPage:!0,isLoading:!1,holderDid:"did:hs:8b915133-cb8b-4151-9a63-1b91f702297f",signedVerifiablePresentation:{},presentationDetails:{credentialType:{}},isClaims:!1}},created:function(){var t=localStorage.getItem("user");this.user=JSON.parse(t),this.fetchTemplates()},beforeRouteEnter:function(t,e,r){r((function(t){t.prevRoute=e}))},methods:{openSlider:function(){this.$root.$emit("bv::toggle::collapse","sidebar-right")},showClaims:function(){this.isClaims?this.isClaims=!1:this.isClaims=!0},notifySuccess:function(t){this.$notify({group:"foo",title:"Information",type:"success",text:t})},notifyErr:function(t){this.$notify({group:"foo",title:"Error",type:"error",text:t})},fetchData:function(t,e){var r=this;tt()(t).then((function(t){return t.json()})).then((function(t){if(200!=t.status)throw new Error(t.error);return t.message})).catch((function(t){return r.notifyErr("Error: ".concat(t.message))}))},gotosubpage:function(t){jt.$router.push("".concat(t))},addBlankAttrBox:function(){" "!=this.attributeName&&(this.attributes.push(this.attributeName),this.attributeName=" ")},downloadCredentials:function(){this.forceFileDownload(JSON.stringify(this.signedVerifiablePresentation),"vp.json")},onfileLoadSuccess:function(t){var e=JSON.parse(t.target.result);e||this.notifyErr("Incorrect file");var r=e["type"];r.find((function(t){return"VerifiableCredential"==t}))?(localStorage.removeItem("credential"),localStorage.setItem("credential",JSON.stringify(e))):r.find((function(t){return"VerifiablePresentation"==t}))?(localStorage.removeItem("presentation"),localStorage.setItem("presentation",JSON.stringify(e))):this.notifyErr("Invalid file")},readFile:function(t,e){var r=new FileReader;r.onload=e,r.readAsText(t)},onFileChange:function(t){var e=t.target.files[0];this.readFile(e,this.onfileLoadSuccess)},generatePresentation:function(){var t=Ht(o.a.mark((function t(){var e,r,i,a,n=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.isLoading=!0;try{e=this.presentationTemplate.issuerDid.split(","),r={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)},i={issuerDid:e,queryType:this.presentationTemplate.queryType,domain:this.presentationTemplate.domain,name:this.presentationTemplate.name,schemaId:this.presentationTemplate.schemaId,reason:this.presentationTemplate.reason,required:this.presentationTemplate.required,callbackUrl:this.presentationTemplate.callbackUrl,orgDid:this.$store.state.selectedOrgDid},a="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.PRESENTATION_TEMPLATE_EP),tt()(a,{body:JSON.stringify(i),method:"POST",headers:r}).then((function(t){return t.json()})).then((function(t){n.$store.commit("insertApresentationTemplate",t),n.notifySuccess("Template Successfully created"),n.openSlider()}))}catch(s){this.isLoading=!1,this.notifyErr(s.message)}case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),viewPresentation:function(){this.isLoading=!0;try{var t=JSON.parse(localStorage.getItem("presentation"));if(!t)throw new Error("Please select verifiable presentation file");var e=t.verifiableCredential[0];this.presentationDetails={},this.presentationDetails.credentialType={name:e.type[1],url:e["@context"][1]["hsscheme"]},this.presentationDetails.issuerDid=e.issuer,this.presentationDetails.holderDid=e.credentialSubject.id,this.presentationDetails.issuanceDate=e.issuanceDate,this.presentationDetails.expirationDate=e.expirationDate,this.presentationDetails.claim=e.credentialSubject}catch(r){this.isLoading=!1,this.notifyErr(r.message)}},clear:function(){this.presentationDetails="",localStorage.removeItem("presentation"),localStorage.removeItem("credential"),this.$refs.vpFile.value=null,this.$refs.vcFile.value=null,this.signedVerifiablePresentation={},this.isCredentialIssued=!1},verifyPresentation:function(){var t=Ht(o.a.mark((function t(){var e,r,i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isLoading=!0,t.prev=1,e=JSON.parse(localStorage.getItem("presentation")),e){t.next=5;break}throw new Error("Please select verifiable presentation file");case 5:return r=e.verifiableCredential[0],t.next=8,Mt.credential.verifyPresentation({presentation:e,challenge:"test_challenge",issuerDid:r.issuer,holderDid:r.credentialSubject.id});case 8:i=t.sent,i.verified?this.notifySuccess("Presentation verified"):this.notifyErr("Presentation can not verified"),this.isLoading=!1,this.clear(),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](1),this.isLoading=!1,this.notifyErr(t.t0.message);case 18:case"end":return t.stop()}}),t,this,[[1,14]])})));function e(){return t.apply(this,arguments)}return e}()},mixins:[c]},qt=Wt,Ft=(r("28f2"),Object(h["a"])(qt,$t,Vt,!1,null,"db1d1e34",null)),Jt=Ft.exports,zt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home marginRight marginLeft"},[r("h3",{staticClass:"leftAlign"},[t._v("Welcome, "+t._s(t.user.name)+" !")]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-6"},[r("Profile")],1),r("div",{staticClass:"col-md-6"},[r("Dashboard")],1)])])},Gt=[],Kt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row",staticStyle:{padding:"10px"}},[r("div",{staticClass:"col-md-6",staticStyle:{"margin-left":"40%"}},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[t._v("\n            NETWORK DETAILS "),!0===t.networkStatus.result.listening?r("span",{staticClass:"dot"}):t._e()]),r("div",{staticClass:"card-body leftAlign"},[r("p",[t._v("NETWORK\n            ")]),r("p",{staticClass:"fVal"},[t._v(t._s(t.networkStatus.result.peers[0].node_info.network.toUpperCase()+"  NETWORK"))]),r("p",[t._v("NODE URL\n            ")]),r("p",{staticClass:"fVal"},[r("a",{attrs:{href:t.networkStatus.nodeUrl,target:"_blank"}},[t._v(t._s(this.$config.nodeServer.BASE_URL))])]),r("p",[t._v("EXPLORER URL\n            ")]),r("p",{staticClass:"fVal"},[r("a",{attrs:{href:t.networkStatus.explorerUrl,target:"_blank"}},[t._v(t._s(this.$config.explorer.BASE_URL))])])])])])])},Qt=[],Xt=void 0;function Yt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Zt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Yt(Object(r),!0).forEach((function(e){te(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Yt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function te(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function ee(t,e,r,i,a,n,s){try{var o=t[n](s),c=o.value}catch(l){return void r(l)}o.done?e(c):Promise.resolve(c).then(i,a)}function re(t){return function(){var e=this,r=arguments;return new Promise((function(i,a){var n=t.apply(e,r);function s(t){ee(n,i,a,s,o,"next",t)}function o(t){ee(n,i,a,s,o,"throw",t)}s(void 0)}))}}var ie={name:"PanelPage",mounted:function(){},components:{},data:function(){return{active:0,networkStatus:{result:{listening:"false",listeners:[],n_peers:"",peers:[{}]},status:"DOWN",nodeUrl:"",explorerUrl:this.$config.explorer.BASE_URL,schemaCount:"0",didCount:"0"}}},created:function(){var t=re(o.a.mark((function t(){var e,r=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="".concat(this.$config.nodeServer.BASE_URL).concat(this.$config.nodeServer.NETWORK_STATUS_EP),t.next=3,fetch(e).then((function(t){return t.json()})).then((function(t){r.networkStatus=Zt({},t),console.log(r.networkStatus.result.peers[0])})).catch((function(t){return alert("Error: ".concat(t.message))}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{gotosubpage:function(t){Xt.$router.push("".concat(t))}}},ae=ie,ne=(r("cce2"),Object(h["a"])(ae,Kt,Qt,!1,null,"3109faa8",null)),se=ne.exports,oe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12",staticStyle:{"margin-top":"2%","margin-bottom":"7%"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-5"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body tile"},[t._v(t._s(t.schemaCount))]),r("div",{staticClass:"card-header"},[t._v("AUTHORED SCHEMAS")])])]),r("div",{staticClass:"col-md-5"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body tile"},[t._v(t._s(t.credentialCount))]),r("div",{staticClass:"card-header"},[t._v("ISSUED CREDENTIALS")])])])])]),r("div",{staticClass:"col-md-10 leftAlign"},[r("div",{staticClass:"card"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"row"},[t._m(0),r("div",{staticClass:"col-md-8",staticStyle:{"flex-wrap":"wrap",padding:"20px"}},[r("p",[t._v("DID")]),r("p",{staticClass:"fVal"},[r("a",{attrs:{href:""+t.$config.nodeServer.BASE_URL_REST+t.$config.nodeServer.DID_RESOLVE_EP+t.user.id+":",target:"_blank"}},[t._v(t._s(t.user.id))])]),r("p",[t._v("EMAIL")]),r("p",{staticClass:"fVal"},[t._v(t._s(t.user.email))]),t.user.phoneNumber?r("p",[t._v("Phone Number: "+t._s(t.user.phoneNumber))]):t._e()])])])])])])},ce=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-md-4"},[r("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://cdn1.iconfinder.com/data/icons/female-avatars-vol-1/256/female-portrait-avatar-profile-woman-sexy-afro-2-512.png",alt:"John"}})])}],le=void 0;function ue(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function de(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ue(Object(r),!0).forEach((function(e){pe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var he={name:"Profile",mounted:function(){},components:{},computed:{credentialCount:function(){return this.$store.getters.totalCredentials},schemaCount:function(){return this.$store.getters.totalSchemas}},data:function(){return{active:0,userKeys:[],appList:[],user:{id:"",publicKey:"",email:"",phoneNumber:"",fname:""},authToken:localStorage.getItem("authToken")}},created:function(){var t=localStorage.getItem("user");this.user=de({},JSON.parse(t)),this.userKeys=Object.keys(this.user)},methods:{fetchData:function(t,e){return fetch(t,e).then((function(t){return t.json()})).then((function(t){return t.message})).catch((function(t){return alert("Error: ".concat(t.message))}))},pollData:function(){var t=this,e="".concat(this.$config.nodeServer.BASE_URL).concat(this.$config.nodeServer.SCHEMA_LIST_EP),r={};this.fetchData(e).then((function(e){e&&e.length>0&&(e=e.filter((function(e){return e.owner===t.user.id})),t.schemaCount=e.length)})),e="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.CRED_LIST_EP),r={method:"GET",headers:{"x-auth-token":this.authToken}},this.fetchData(e,r).then((function(e){e&&(t.credentialCount=e.count)}))},gotosubpage:function(t){le.$router.push("".concat(t))}}},me=he,fe=(r("6c61"),Object(h["a"])(me,oe,ce,!1,null,"4fe606d2",null)),ge=fe.exports,ve=void 0,_e={name:"PanelPage",components:{Dashboard:se,Profile:ge},data:function(){return{appList:[],user:{},appName:"",authToken:localStorage.getItem("authToken")}},created:function(){var t=localStorage.getItem("user");this.user=JSON.parse(t)},methods:{gotosubpage:function(t){ve.$router.push("".concat(t))},logout:function(){localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("credentials"),localStorage.removeItem("userData"),null!=this.$route.params.nextUrl?this.$router.push(this.$route.params.nextUrl):this.$router.push("/login")}}},Se=_e,Ee=(r("22e7"),Object(h["a"])(Se,zt,Gt,!1,null,"89d98a22",null)),be=Ee.exports,ye=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-12",staticStyle:{"text-align":"left"}},[r("Info",{attrs:{message:t.description}}),r("div",{staticClass:"form-group",staticStyle:{"text-align":"right"}},[r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openSlider()}}},[t._v("+ Schema")])]),r("StudioSideBar",{attrs:{title:"Create Schema"}},[r("div",{staticClass:"container"},[r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"schemaName"}},[r("strong",[t._v("Schema Name:")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.credentialName,expression:"credentialName"}],staticClass:"form-control",attrs:{type:"text",id:"schemaName","aria-describedby":"schemaNameHelp"},domProps:{value:t.credentialName},on:{input:function(e){e.target.composing||(t.credentialName=e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"schDescription"}},[r("strong",[t._v("Description:")])]),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.credentialDescription,expression:"credentialDescription"}],staticClass:"form-control",attrs:{type:"text",id:"schDescription",rows:"5",cols:"20","aria-describedby":"orgNameHelp"},domProps:{value:t.credentialDescription},on:{input:function(e){e.target.composing||(t.credentialDescription=e.target.value)}}})]),r("div",{staticClass:"form-group card"},[r("div",{staticClass:"card-header"},[r("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],attrs:{variant:"link"}},[t._v("Fields Configurations")])],1),r("b-collapse",{staticClass:"mt-2",staticStyle:{padding:"10px"},attrs:{id:"collapse-1"}},[t.attributes.length>0?r("div",{staticClass:"form-group tile"},t._l(t.attributes,(function(e){return r("div",{key:e.type},[r("div",{staticClass:"sm-tiles"},[t._v("\n                        "+t._s(e.name)+"\n                        "),r("span",[t._v("x")])])])})),0):t._e(),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"ipattributeName"}},[t._v("Name")]),r("div",{staticClass:"col-sm-10"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.attributeName,expression:"attributeName"}],staticClass:"form-control",attrs:{type:"text",id:"ipattributeName",placeholder:""},domProps:{value:t.attributeName},on:{input:function(e){e.target.composing||(t.attributeName=e.target.value)}}})])]),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"type"}},[t._v("Type")]),r("div",{staticClass:"col-sm-10"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.attributeTypes,expression:"attributeTypes"}],staticClass:"form-control",attrs:{type:"text",id:"type",placeholder:""},domProps:{value:t.attributeTypes},on:{input:function(e){e.target.composing||(t.attributeTypes=e.target.value)}}})])]),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"type"}},[t._v("Format")]),r("div",{staticClass:"col-sm-10"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.attributeFormat,expression:"attributeFormat"}],staticClass:"form-control",attrs:{type:"text",id:"type",placeholder:"Enter attribute Format (eg email)"},domProps:{value:t.attributeFormat},on:{input:function(e){e.target.composing||(t.attributeFormat=e.target.value)}}})])]),r("div",{staticClass:"form-group row"},[r("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"required"}},[t._v("Required?")]),r("div",{staticClass:"col-sm-10"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.attributeRequired,expression:"attributeRequired"}],attrs:{type:"checkbox",id:"required"},domProps:{checked:Array.isArray(t.attributeRequired)?t._i(t.attributeRequired,null)>-1:t.attributeRequired},on:{change:function(e){var r=t.attributeRequired,i=e.target,a=!!i.checked;if(Array.isArray(r)){var n=null,s=t._i(r,n);i.checked?s<0&&(t.attributeRequired=r.concat([n])):s>-1&&(t.attributeRequired=r.slice(0,s).concat(r.slice(s+1)))}else t.attributeRequired=a}}})])]),r("div",{staticClass:"form-group row"},[r("div",{staticClass:"col-sm-10"},[r("a",{staticClass:"btn btn-primary",staticStyle:{color:"white"},on:{click:function(e){return t.addBlankAttrBox()}}},[t._v("Add +")])])])])],1),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"schDescription"}},[r("strong",[t._v("Additional Properties?:")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.additionalProperties,expression:"additionalProperties"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.additionalProperties)?t._i(t.additionalProperties,null)>-1:t.additionalProperties},on:{change:function(e){var r=t.additionalProperties,i=e.target,a=!!i.checked;if(Array.isArray(r)){var n=null,s=t._i(r,n);i.checked?s<0&&(t.additionalProperties=r.concat([n])):s>-1&&(t.additionalProperties=r.slice(0,s).concat(r.slice(s+1)))}else t.additionalProperties=a}}})]),r("div",{staticClass:"form-group row"},[r("div",{staticClass:"col-md-12"},[r("hr"),r("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.createSchema()}}},[t._v("Create")])])])])])],1)]),t.schemaList.length>0?r("div",{staticClass:"row",staticStyle:{"margin-top":"2%"}},[r("div",{staticClass:"col-md-12"},[r("table",{staticClass:"table table-bordered",staticStyle:{background:"#FFFF"}},[t._m(0),r("tbody",t._l(t.schemaList,(function(e){return r("tr",{key:e._id},[r("td",[r("a",{attrs:{href:""+t.$config.nodeServer.BASE_URL_REST+t.$config.nodeServer.SCHEMA_GET_REST+e.schemaId+":",target:"_blank"}},[t._v(t._s(e.schemaId?t.shorten(e.schemaId):"-"))])]),r("td",[t._v(t._s(e.schemaDetails?e.schemaDetails.name:"-"))]),r("td",[t._v(t._s(e.schemaDetails?e.schemaDetails.modelVersion:"-"))]),r("td",{staticClass:"word-wrap"},[t._v(t._s(e.schemaDetails?e.schemaDetails.schema.description:"-"))]),r("td",{staticClass:"word-wrap"},[t._v(t._s(e.schemaDetails?Object.keys(e.schemaDetails.schema.properties).toString():"-"))]),r("td",[t._v(t._s(e.schemaDetails?e.schemaDetails.authored:"-"))]),r("td",{staticStyle:{"word-wrap":"break-word","min-width":"200px","max-width":"200px"}},[e.transactionHash?r("a",{attrs:{target:"_blank",href:t.$config.explorer.BASE_URL+"explorer/txdetails?hash=0x"+e.transactionHash}},[t._v(t._s(t.shorten("0x"+e.transactionHash)))]):r("span",[t._v("-")])]),r("td",[t._v(t._s(e.status))])])})),0)])])]):r("div",{staticClass:"form-group"},[r("h2",[t._v("Create your first schema!")])])],1)},Pe=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("thead",{staticClass:"thead-light"},[r("tr",[r("th",[t._v("Schema Id")]),r("th",[t._v("Name")]),r("th",[t._v("Model Version")]),r("th",[t._v("Description")]),r("th",[t._v("Properties")]),r("th",[t._v("Created At")]),r("th",[t._v("Transaction Hash")]),r("th",[t._v("Status")])])])}],Ce=void 0,Ae={name:"IssueCredential",components:{QrcodeVue:w["a"],Info:vt,Loading:B.a,StudioSideBar:Tt},computed:{schemaList:function(){return this.$store.state.schemaList},selectedOrg:function(){return this.$store.getters.getSelectedOrg}},data:function(){return{description:"Credential Schema defines what information will go inside a verifiable credential. For example: Directorate General of Civil Aviation (DGCA) can define a schema (or format) for flights tickets, being issued by all airline companies in India.",active:0,host:location.hostname,user:{},page:1,prevRoute:null,attributeName:"",attributeTypes:"",attributeFormat:"",attributeRequired:!1,attributes:[],issueCredAttributes:[],additionalProperties:!1,showSchema:!0,radioSelected:"create",credentialName:"",isCredentialIssued:!1,signedVerifiableCredential:"",authToken:localStorage.getItem("authToken"),credentialDescription:"",fullPage:!0,isLoading:!1,QrData:{QRType:"ISSUE_SCHEMA",serviceEndpoint:"",schemaId:"",appDid:"",appName:"Hypersign Studio",challenge:"",provider:"",data:""}}},created:function(){var t=localStorage.getItem("user");this.user=JSON.parse(t)},beforeRouteEnter:function(t,e,r){r((function(t){t.prevRoute=e}))},methods:{openSlider:function(){this.$root.$emit("bv::toggle::collapse","sidebar-right")},gotosubpage:function(t){Ce.$router.push("".concat(t))},addBlankAttrBox:function(){if(console.log(this.attributeName,this.attributeTypes),""!==this.attributeName&&""!==this.attributeTypes){var t={name:this.attributeName,type:this.attributeTypes,format:this.attributeFormat,isRequired:this.attributeRequired};console.log(t),this.attributes.push(t),this.attributeName="",this.attributeTypes="",this.attributeFormat="",this.attributeRequired=!1}else this.notifyErr("Name or Type Cannot be blank")},ssePopulateSchema:function(t,e){var r=new EventSource("".concat(this.$config.studioServer.SCHEMA_SSE).concat(t));r.onmessage=function(t){var i=JSON.parse(t.data);console.log(i),"Registered"!==i.status&&"Failed"!==i.status||(r.close(),e.dispatch("insertAschema",i))},r.onopen=function(t){console.log("Connection to server opened.",t)},r.onerror=function(t){console.log(t),r.close()}},openWallet:function(t){""!=t&&(this.walletWindow=window.open("".concat(t),"popUpWindow","height=800,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes"))},createSchema:function(){var t=this;try{if(this.isLoading=!0,""==this.credentialName)throw new Error("SchemaName can not be blank");if(0==this.attributes.length)throw new Error("Atleast one attribute is required");var e="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.SAVE_SCHEMA_EP),r={name:this.credentialName,author:this.user.id,fields:this.attributes,description:this.credentialDescription,additionalProperties:this.additionalProperties,orgDid:this.$store.state.selectedOrgDid};this.QrData.data=r;var i={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)};tt()(e,{method:"POST",body:JSON.stringify({QR_DATA:this.QrData}),headers:i}).then((function(t){return t.json()})).then((function(e){var r=e.QR_DATA;if(200!==e.status)throw new Error("".concat(e.error));t.notifySuccess("Schema creation initiated. Please approve the transaction from your wallet"),t.credentialName="Schema",t.$store.dispatch("insertAschema",e.schema);var i="".concat(t.$config.webWalletAddress,"/deeplink?url=").concat(JSON.stringify(r));t.openWallet(i),t.ssePopulateSchema(e.schema._id,t.$store),t.openSlider()}))}catch(a){console.error(a),this.notifyErr("Error: ".concat(a.message))}finally{this.isLoading=!1}}},mixins:[c]},Oe=Ae,we=(r("1fad"),Object(h["a"])(Oe,ye,Pe,!1,null,"5a011b38",null)),Re=we.exports,Te=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("div",{staticClass:"form-group",staticStyle:{"text-align":"right"}},[r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openSlider()}}},[t._v("+ Organization")])]),r("StudioSideBar",{attrs:{title:"Add Organization"}},[r("div",{staticClass:"container"},[t.orgStore.orgDid?r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"orgName"}},[r("strong",[t._v("Org DID:")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore.orgDid,expression:"orgStore.orgDid"}],staticClass:"form-control",attrs:{type:"text",id:"orgDid","aria-describedby":"orgNameHelp",disabled:""},domProps:{value:t.orgStore.orgDid},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"orgDid",e.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"orgNameHelp"}},[r("a",{attrs:{href:""+t.$config.nodeServer.BASE_URL_REST+t.$config.nodeServer.DID_RESOLVE_EP+t.orgStore.orgDid+":",target:"_blank"}},[t._v("Resolve DID")])])]):r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"orgName"}},[r("strong",[t._v("Org ID:")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore._id,expression:"orgStore._id"}],staticClass:"form-control",attrs:{type:"text",id:"orgDid","aria-describedby":"orgNameHelp",disabled:""},domProps:{value:t.orgStore._id},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"_id",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"orgName"}},[r("strong",[t._v("Organization Name:")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore.name,expression:"orgStore.name"}],staticClass:"form-control",attrs:{type:"text",id:"orgName","aria-describedby":"orgNameHelp",placeholder:"Enter your org name"},domProps:{value:t.orgStore.name},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"name",e.target.value)}}}),r("small",{staticClass:"form-text text-muted",attrs:{id:"orgNameHelp"}},[t._v("Some help text")])]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"domain"}},[r("strong",[t._v("Domain:")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore.domain,expression:"orgStore.domain"}],staticClass:"form-control",attrs:{type:"text",id:"domain","aria-describedby":"domainHelp",placeholder:"Enter your domain name"},domProps:{value:t.orgStore.domain},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"domain",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"logo"}},[r("strong",[t._v("Logo URL:")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore.logo,expression:"orgStore.logo"}],staticClass:"form-control",attrs:{type:"text",id:"logo","aria-describedby":"logoHelp",placeholder:"Enter logo URL"},domProps:{value:t.orgStore.logo},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"logo",e.target.value)}}})]),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"region"}},[r("strong",[t._v("Region:")])]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore.region,expression:"orgStore.region"}],staticClass:"form-control",attrs:{type:"text",id:"region","aria-describedby":"regionHelp",placeholder:"Select your region"},domProps:{value:t.orgStore.region},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"region",e.target.value)}}})]),t.edit?r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.createAnOrg()}}},[t._v(" Edit")])]):r("div",{staticClass:"form-group"},[r("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.createAnOrg()}}},[t._v(" Save")])])])]),t.orgList.length>0?r("div",{staticClass:"row"},t._l(t.orgList,(function(e){return r("div",{key:e._id,staticClass:"col-lg-4"},[r("b-card",{staticClass:"mb-2 eventCard",staticStyle:{"max-width":"30rem","margin-top":"10px","max-height":"25rem"},attrs:{title:e.name,tag:"article","img-top":""}},[r("ul",{staticStyle:{"list-style-type":"none","padding-left":"0px","min-height":"80px"}},[r("li",[r("span",{staticClass:"card-title"},[t._v(t._s(e.orgDid))])]),r("li",[r("span",{staticClass:"card-title"},[t._v(t._s(e.network))])]),r("li",[r("span",{staticClass:"card-title"},[t._v(t._s(e.domain))])])]),r("footer",[r("div",{staticClass:"form-group row",staticStyle:{"margin-bottom":"0rem"}},[r("div",{staticClass:"col-sm-10"},[r("ul",{staticStyle:{"list-style-type":"none","padding-left":"0px"}},["Failed"===e.status?r("li",[r("span",{staticClass:"card-title"},[r("img",{attrs:{src:t.images.redcross,height:"25",width:"25"}}),t._v(" Failed\n            ")])]):"Registered"===e.status?r("li",[r("span",{staticClass:"card-title"},[r("img",{attrs:{src:t.images.greentick,height:"21",width:"21"}}),t._v(" Registered\n            ")])]):r("li",[r("span",{staticClass:"card-title"},[r("img",{attrs:{src:t.images.loader,height:"25",width:"25"}}),t._v(" Processing ..... \n            ")])])])]),r("small",[r("span",{staticStyle:{cursor:"pointer"},attrs:{title:"Click to edit this event"},on:{click:function(r){return t.editOrg(e._id)}}},[t._v("\n              Edit\n            ")]),t._v(" |\n            "),r("span",{staticStyle:{cursor:"pointer"},attrs:{title:"Click to edit this event"},on:{click:function(r){return t.switchOrg(e._id)}}},[t._v("\n              Switch\n            ")])])])])])],1)})),0):r("div",{staticClass:"form-group"},[r("h2",[t._v("Create your first organization!")])])],1)},De=[];function Le(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Ue(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Le(Object(r),!0).forEach((function(e){xe(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Le(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xe(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var Ie={computed:{orgList:function(){return this.$store.state.orgList}},data:function(){return{edit:!1,orgStore:{name:"Hypermine Pvt Ltd",domain:"hypermine.in",logo:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse2.mm.bing.net%2Fth%3Fid%3DOIP.5EZ51foyo3QBV2FHnKq1cwHaEc%26pid%3DApi&f=1",region:"US EAST",network:"Jagrat",orgDid:"",userDid:"",status:""},authToken:localStorage.getItem("authToken"),isLoading:!0,isProcessFinished:!0,images:{greentick:r("478e"),redcross:r("d199"),loader:r("b982")}}},components:{HfPopUp:Pt,Loading:B.a,StudioSideBar:Tt},methods:{ssePopulateOrg:function(t,e){var r=new EventSource("".concat(this.$config.studioServer.ORG_SSE).concat(t));r.onmessage=function(t){var i=JSON.parse(t.data);console.log(i),"Registered"!==i.status&&"Failed"!==i.status||(r.close(),e.commit("insertAnOrg",i))},r.onopen=function(t){console.log("Connection to server opened.",t)},r.onerror=function(t){console.log(t),r.close()}},openWallet:function(t){""!=t&&(this.walletWindow=window.open("".concat(t),"popUpWindow","height=800,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes"),this.isProcessFinished=!1)},switchOrg:function(t){this.$store.commit("selectAnOrg",t),this.$store.dispatch("fetchAllOrgDataOnOrgSelect",t)},openSlider:function(){this.$root.$emit("bv::toggle::collapse","sidebar-right")},editOrg:function(t){this.edit=!0,Object.assign(this.orgStore,Ue({},this.$store.getters.findOrgByOrgID(t))),this.openSlider()},createAnOrg:function(){var t,e,r=this;this.edit?(e="PUT",t="".concat(this.$config.studioServer.BASE_URL,"api/v1/org/update")):(t="".concat(this.$config.studioServer.BASE_URL,"api/v1/org/create"),e="POST");var i={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)};this.orgStore.userDid=JSON.parse(localStorage.getItem("user")).id;var a={orgData:this.orgStore};this.isLoading=!0,fetch(t,{method:e,body:JSON.stringify(a),headers:i}).then((function(t){return t.json()})).then((function(t){var e=t.org;if(!r.edit){var i=t.QrData,a="".concat(r.$config.webWalletAddress,"/deeplink?url=").concat(JSON.stringify(i));r.openWallet(a)}200===t.status&&(r.$store.commit("insertAnOrg",t.org),r.$store.commit("selectAnOrg",t.org._id),r.isProcessFinished=!0,r.openSlider(),r.notifySuccess("Org Created successfull"),r.edit&&(r.$store.commit("updateAnOrg",t.org),r.notifySuccess("Org Edited successfull"))),r.edit||(console.log(e),r.ssePopulateOrg(e._id,r.$store))})).catch((function(t){console.log(t),r.notifyError("Something went wrong")})).finally((function(){r.isLoading=!1}))}},mixins:[c]},Ne=Ie,ke=(r("e4eb"),Object(h["a"])(Ne,Te,De,!1,null,"2c7fd4de",null)),$e=ke.exports;i["default"].use(C["a"]);var Ve=new C["a"]({mode:"hash",routes:[{path:"/",redirect:"/studio",requiresAuth:!0},{path:"/login",redirect:"/studio/login"},{path:"/studio",redirect:"/studio/dashboard",requiresAuth:!0},{path:"/studio/login",name:"PKIIdLogin",component:Q},{path:"/studio/dashboard",name:"dashboard",component:be,meta:{requiresAuth:!0}},{path:"/studio/org",name:"Org",component:$e,meta:{requiresAuth:!0}},{path:"/studio/register",name:"register",component:lt},{path:"/studio/schema",name:"schema",component:Re,meta:{requiresAuth:!0}},{path:"/studio/credential",name:"credential",component:kt,meta:{requiresAuth:!0}},{path:"/studio/presentation",name:"presentation",component:Jt,meta:{requiresAuth:!0}}]});Ve.beforeEach((function(t,e,r){if(t.matched.some((function(t){return t.meta.requiresAuth}))){var i=localStorage.getItem("authToken");if(i){var a="".concat(V.studioServer.BASE_URL,"protected");console.log(a),tt()(a,{headers:{Authorization:"Bearer ".concat(i)},method:"POST"}).then((function(t){return t.json()})).then((function(e){403==e.status?r({path:"/studio/login",params:{nextUrl:t.fullPath}}):(localStorage.setItem("user",JSON.stringify(e.message)),console.log(e),r())})).catch((function(e){console.log(e),r({path:"/studio/login",params:{nextUrl:t.fullPath}})}))}else r({path:"/studio/login",params:{nextUrl:t.fullPath}})}else r()}));var je=Ve,Be=r("5f5b"),He=r("ee98"),Me=r.n(He),We=r("2f62");function qe(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function Fe(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?qe(Object(r),!0).forEach((function(e){Je(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Je(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}i["default"].use(We["a"]);var ze=new We["a"].Store({state:{schemaList:[],vcList:[],templateList:[],orgList:[],selectedOrgDid:""},getters:{isAnyOrgSelected:function(t){return""!=t.selectedOrgDid},totalSchemas:function(t){return t.schemaList.length},totalCredentials:function(t){return t.vcList.length},findSchemaBySchemaID:function(t){return function(e){return t.schemaList.find((function(t){return t.schemaId===e}))}},findOrgByOrgID:function(t){return function(e){return t.orgList.find((function(t){return t._id===e}))}},getSelectedOrg:function(t){return t.orgList.find((function(e){return e._id===t.selectedOrgDid}))},listOfAllSchemaOptions:function(t){var e=t.schemaList.map((function(t){return t.schemaId&&void 0!==t.schemaId&&"Registered"===t.status?{text:t.schemaDetails.name,value:t.schemaId}:null}));return e=e.filter((function(t){return t})),e.unshift({value:null,text:"Please select a schema"}),e}},mutations:{resetStore:function(t){console.log("resetting store"),t.orgList=[],t.schemaList=[],t.vcList=[],t.templateList=[],t.selectedOrgDid=""},selectAnOrg:function(t,e){t.selectedOrgDid=e},insertAschema:function(t,e){t.schemaList.find((function(t){return t._id===e._id}))?(console.log("already exists scheme id ="+e._id),this.commit("updateAschema",e)):t.schemaList.push(e)},insertAnOrg:function(t,e){t.orgList.find((function(t){return t._id===e._id}))?(console.log("already exists scheme id ="+e._id),this.commit("updateAnOrg",e)):t.orgList.push(e)},updateAschema:function(t,e){console.log("updating schema");var r=t.schemaList.findIndex((function(t){return t._id===e._id}));Object.assign(t.schemaList[r],Fe({},e))},updateAnOrg:function(t,e){var r=t.orgList.findIndex((function(t){return t._id===e._id}));Object.assign(t.orgList[r],Fe({},e))},insertApresentationTemplate:function(t,e){t.templateList.find((function(t){return t._id===e._id}))||t.templateList.push(e)},insertAcredential:function(t,e){t.vcList.find((function(t){return t._id===e._id}))?(console.log("already exists credential id ="+e._id),this.commit("updateAcredential",e)):t.vcList.push(e)},updateAcredential:function(t,e){console.log("updating a credential",e);var r=t.vcList.findIndex((function(t){return t._id===e._id}));Object.assign(t.vcList[r],Fe({},e))}},actions:{insertAschema:function(t,e){var r=t.commit,i=e.schemaId;if(i){var a="".concat(V.nodeServer.BASE_URL_REST).concat(V.nodeServer.SCHEMA_GET_REST).concat(i,":");fetch(a).then((function(t){return t.json()})).then((function(t){var i=t.schema[0];if(i.schema.properties){var a=i.schema.properties,n=JSON.parse(a);i.schema.properties=n}e["schemaDetails"]=i,r("insertAschema",e)})).catch((function(t){return console.log}))}else r("insertAschema",e)},insertAcredential:function(t,e){var r=t.commit,i=e.vc_id;i?fetch(i+":").then((function(t){return t.json()})).then((function(t){Object.assign(e,Fe({},t)),r("insertAcredential",e)})).catch((function(t){return console.log})):r("insertAcredential",e)},fetchAllOrgDataOnOrgSelect:function(t,e){var r=this;t.commit;this.authToken=localStorage.getItem("authToken");var i="".concat(V.studioServer.BASE_URL,"api/v1/presentation/template/org/").concat(this.getters.getSelectedOrg._id,"/"),a={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)};fetch(i,{headers:a}).then((function(t){return t.json()})).then((function(t){0!==t.length?(r.state.templateList=[],t.forEach((function(t){r.commit("insertApresentationTemplate",t)}))):r.state.templateList=[]}));var n="".concat(V.studioServer.BASE_URL).concat(V.studioServer.SCHEMA_LIST_EP,"/").concat(this.getters.getSelectedOrg._id,"/?page=1&limit=10"),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)}};fetch(n,{headers:s.headers}).then((function(t){return t.json()})).then((function(t){t&&0!==t.schemaList.length?(r.state.schemaList=[],t.schemaList.forEach((function(t){r.dispatch("insertAschema",t)}))):r.state.schemaList=[]}));var o="".concat(V.studioServer.BASE_URL).concat(V.studioServer.CRED_LIST_EP,"/").concat(this.getters.getSelectedOrg._id),c={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)}};fetch(o,{headers:c.headers}).then((function(t){return t.json()})).then((function(t){t&&0!==t.credList.length?(r.state.vcList=[],t.credList.forEach((function(t){r.dispatch("insertAcredential",t)}))):r.state.vcList=[]}))}}});r("f9e3"),r("2dd8");i["default"].config.productionTip=!1,i["default"].use(Be["a"]),i["default"].use(Me.a),i["default"].prototype.$config=V,new i["default"]({router:je,store:ze,render:function(t){return t(P)}}).$mount("#app")},"5cd6":function(t,e,r){},6:function(t,e){},"65b3":function(t,e,r){},"6c61":function(t,e,r){"use strict";var i=r("3dee"),a=r.n(i);a.a},7:function(t,e){},7899:function(t,e,r){"use strict";var i=r("4c49"),a=r.n(i);a.a},8:function(t,e){},"8fa1":function(t,e,r){},9:function(t,e,r){t.exports=r("56d7")},a5a6:function(t,e,r){"use strict";var i=r("d14e"),a=r.n(i);a.a},b0a0:function(t,e,r){"use strict";var i=r("07bb"),a=r.n(i);a.a},b982:function(t,e,r){t.exports=r.p+"img/small-loader.3f259006.gif"},cce2:function(t,e,r){"use strict";var i=r("5425"),a=r.n(i);a.a},d14e:function(t,e,r){},d199:function(t,e,r){t.exports=r.p+"img/red-cross.2d80c3a5.png"},d768:function(t,e,r){},e2c9:function(t,e,r){var i=r("69f2"),a=r("7247");a.ModeOfOperation.ctr;function n(t){return i("sha256").update(t).digest()}function s(t){return a.utils.hex.fromBytes(n(t))}t.exports={sha256hashStr:s}},e4eb:function(t,e,r){"use strict";var i=r("edcb"),a=r.n(i);a.a},edcb:function(t,e,r){},f1b8:function(t,e,r){}});
//# sourceMappingURL=app.5dc0856e.js.map