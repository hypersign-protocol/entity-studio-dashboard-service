(function(t){function e(e){for(var r,s,o=e[0],c=e[1],l=e[2],d=0,h=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(h.length)h.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],r=!0,o=1;o<a.length;o++){var c=a[o];0!==i[c]&&(r=!1)}r&&(n.splice(e--,1),t=s(s.s=a[0]))}return t}var r={},i={app:0},n=[];function s(e){if(r[e])return r[e].exports;var a=r[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=r,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(a,r,function(e){return t[e]}.bind(null,r));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;n.push([9,"chunk-vendors"]),a()})({0:function(t,e){},"0348":function(t,e,a){},"07bb":function(t,e,a){},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},15:function(t,e){},16:function(t,e){},17:function(t,e){},18:function(t,e){},"18aa":function(t,e,a){},19:function(t,e){},"19f3":function(t,e,a){"use strict";var r=a("f1b8"),i=a.n(r);i.a},2:function(t,e){},20:function(t,e){},"22e7":function(t,e,a){"use strict";var r=a("65b3"),i=a.n(r);i.a},3:function(t,e){},4:function(t,e){},"4c49":function(t,e,a){},5:function(t,e){},5425:function(t,e,a){},"555a":function(t,e,a){t.exports=a.p+"img/icon.7931bf0c.png"},5619:function(t){t.exports=JSON.parse('{"NODE_ENV":"$NODE_ENV","TITLE":"$VUE_APP_TITLE","DESC":"$VUE_APP_DESC","VERSION":"$VUE_APP_VERSION","STUDIO_SERVER_BASE_URL":"$VUE_APP_STUDIO_SERVER_BASE_URL","STUDIO_SERVER_BASE_WS":"$VUE_APP_STUDIO_SERVER_BASE_WS","NODE_SERVER_BASE_URL":"$VUE_APP_NODE_SERVER_BASE_URL","NODE_SERVER_BASE_URL_REST":"$VUE_APP_NODE_SERVER_BASE_URL_REST","SCHEMA_GET_EP_REST":"$VUE_APP_SCHEMA_GET_EP_REST","ACCPCT_CRED_EP":"$VUE_APP_ACCPCT_CRED_EP","EXPLORER_BASE_URL":"$VUE_APP_EXPLORER_BASE_URL","STUDIO_SERVER_SAVE_SCHEMA":"$VUE_APP_STUDIO_SERVER_SAVE_SCHEMA","SCHEMA_LIST_EP":"$VUE_APP_SCHEMA_LIST_EP","STUDIO_SERVER_CRED_LIST_EP":"$VUE_APP_STUDIO_SERVER_CRED_LIST_EP","WEB_WALLET_ADDRESS":"$VUE_APP_WEB_WALLET_ADDRESS","PRESENTATION_TEMPLATE_EP":"$VUE_APP_PRESENTATION_TEMPLATE_EP","SCHEMA_SSE":"$VUE_APP_SCHEMA_SSE"}')},"56d7":function(t,e,a){"use strict";a.r(e);var r=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"row nav-style"},[a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group form-inline"},[a("img",{staticClass:"logo-style",attrs:{src:"https://thumb.tildacdn.com/tild3065-3765-4865-b331-393637653931/-/resize/150x/-/format/webp/hypersign_Yellow.png"}}),a("h4",{staticClass:"subtitle"},[a("span",{staticStyle:{opacity:"0.4"}},[t._v("|")]),t._v(" "+t._s(t.$config.app.name)+" ("+t._s(t.$config.app.version)+")")])])]),t.isShow?a("div",{staticClass:"col-md-2",staticStyle:{"padding-top":"12px"}},[a("OrgDropDown")],1):t._e(),t.authRoutes.includes(t.$router.history.current.name)?t._e():a("div",{staticClass:"col-md-6 rightAlign",staticStyle:{"padding-top":"12px"}},t._l(t.getMenu(),(function(e){return e.isShow?a("button",{key:e.name,staticClass:"btn btn-light btn-sm",attrs:{type:"button"},on:{click:function(a){return t.goToNextPage(e.name)}}},[t._v(t._s(e.name))]):t._e()})),0)]),a("router-view"),a("notifications",{attrs:{group:"foo"}})],1)},n=[],s=a("a34a"),o=a.n(s),c={methods:{shorten:function(t){if(!t||"undefined"===t)return"";if(t.length<=8)return t;var e=t.substr(0,8),a="...",r=t.substr(t.length-8,8);return e+a+r},fetchData:function(t,e){var a=this;fetch(t).then((function(t){return t.json()})).then((function(t){if(200!=t.status)throw new Error(t.error);return t.message})).catch((function(t){return a.notifyErr("Error: ".concat(t.message))}))},notifySuccess:function(t){this.$notify({group:"foo",title:"Information",type:"success",text:t})},notifyErr:function(t){this.$notify({group:"foo",title:"Error",type:"error",text:t})}}},l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dropdown"},[a("select",{staticClass:"custom-select",staticStyle:{width:"150px"},on:{change:function(e){return t.switchOrg(e)}}},[a("option",{domProps:{selected:!0,value:t.selectedOrg._id}},[t._v(t._s(t.selectedOrg.name))]),t._l(t.orgList,(function(e){return a("option",{domProps:{value:e._id}},[t._v(t._s(e.name))])}))],2)])},u=[],d={computed:{orgList:function(){return this.$store.state.orgList},selectedOrg:function(){return this.$store.getters.getSelectedOrg}},methods:{switchOrg:function(t){this.$store.commit("selectAnOrg",t.target.value),this.$store.dispatch("fetchAllOrgDataOnOrgSelect",t.target.value)}}},h=d,p=a("2877"),m=Object(p["a"])(h,l,u,!1,null,null,null),f=m.exports,g=new r["default"],v=g;function _(t,e,a,r,i,n,s){try{var o=t[n](s),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(r,i)}function S(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var n=t.apply(e,a);function s(t){_(n,r,i,s,o,"next",t)}function o(t){_(n,r,i,s,o,"throw",t)}s(void 0)}))}}var b={components:{OrgDropDown:f},computed:{isShow:function(){return this.$store.getters.isAnyOrgSelected},selectedOrg:function(){return this.$store.getters.getSelectedOrg}},data:function(){return{authToken:localStorage.getItem("authToken"),schema_page:1,authRoutes:["register","PKIIdLogin"],menu:[]}},mounted:function(){var t=S(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("Initiating mounted with schema and credentials"),v.$on("initializeStore",this.initializeStore),this.initializeStore("login");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{initializeStore:function(t){console.log(t),this.authToken=localStorage.getItem("authToken"),this.authToken?(this.fetchAllOrgs(),console.log("Fetched all orgs")):console.log("else")},getMenu:function(){var t=[{name:"Dashboard",path:"/studio/dashboard",isShow:!0},{name:"Organization",path:"/studio/org",isShow:!0},{name:"Schema",path:"/studio/schema",isShow:this.isShow},{name:"Credentials",path:"/studio/credential",isShow:this.isShow},{name:"Presentation",path:"/studio/presentation",isShow:this.isShow},{name:"Logout",path:"/login",isShow:!0}];return console.log(this.isShow),t},vcStatus:function(t){return fetch(t+":").then((function(t){return t.json()})).then((function(t){return t})).catch((function(t){Promise.reject(t.message)}))},fetchAllOrgs:function(){var t=this,e="".concat(this.$config.studioServer.BASE_URL,"api/v1/org/all"),a={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)};fetch(e,{headers:a}).then((function(t){return t.json()})).then((function(e){var a=e.org;a&&a.forEach((function(e){t.$store.commit("insertAnOrg",e)})),a&&a.length>0&&(console.log(a),t.$store.commit("selectAnOrg",a[0]._id),t.$store.dispatch("fetchAllOrgDataOnOrgSelect",a[0]._id))}))},fetchTemplates:function(){var t=this,e="".concat(this.$config.studioServer.BASE_URL,"api/v1/presentation/template/").concat(this.selectedOrg._id,"/"),a={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)};fetch(e,{headers:a}).then((function(t){return t.json()})).then((function(e){e.forEach((function(e){t.$store.commit("insertApresentationTemplate",e)}))}))},getList:function(){var t=S(o.a.mark((function t(e){var a,r,i,n,s,c=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a="",r={},"SCHEMA"===e?(a="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.SCHEMA_LIST_EP,"/").concat(this.selectedOrg._id,"/?page=").concat(this.schema_page,"&limit=10"),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)}}):(a="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.CRED_LIST_EP,"/").concat(this.selectedOrg._id),r={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)}}),t.next=5,fetch(a,r);case 5:return i=t.sent,t.next=8,i.json();case 8:if(n=t.sent,!n||500!=n.status){t.next=11;break}return t.abrupt("return",this.notifyErr("Error:  ".concat(n.error)));case 11:"SCHEMA"===e?(console.log(n),s=n.schemaList,s.forEach((function(t){c.$store.dispatch("insertAschema",t)}))):n.credList.forEach((function(t){c.$store.dispatch("insertAcredential",t)}));case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),logout:function(){localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("credentials"),localStorage.removeItem("userData"),this.$store.commit("resetStore")},goToNextPage:function(t){var e=this.getMenu().find((function(e){return e.name===t}));"Logout"===e.name&&this.logout(),this.$router.push(e.path),null!=this.$route.params.nextUrl?this.$router.push(this.$route.params.nextUrl):this.$router.push(e.path)}},mixins:[c]},E=b,y=(a("5d25"),a("b0a0"),Object(p["a"])(E,i,n,!1,null,"320a5ab8",null)),C=y.exports,w=a("8c4f"),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",staticStyle:{"align-content":"center"}},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"col-md-7",staticStyle:{"font-size":"small",color:"grey"},attrs:{hidden:""}},[t._v("\n    Can we put one big image here?\n  ")]),a("div",{staticClass:"col-md-3",staticStyle:{"font-size":"small",color:"grey","margin-left":"36%"}},[a("form",{staticStyle:{padding:"6px"},attrs:{action:"#"}},[a("b-card",{staticStyle:{padding:"40px"},attrs:{"no-body":""}},[a("h4",[t._v("Login")]),a("hr"),a("div",{staticClass:"row"},[a("form",{staticClass:"col-md-12",attrs:{action:"#"}},[a("div",{staticClass:"form-group"},[a("vue-qr",{attrs:{margin:"1",text:t.qr_data,size:250,logoSrc:t.src}}),a("label",{staticStyle:{"font-size":"small",color:"grey","margin-top":"1%"}},[t._v("Scan QR code using Hypersign Mobile\n                App")]),a("div",[a("span",{staticStyle:{"font-size":"small",color:"grey",padding:"10px"}},[t._v("\n                  Get the app on\n                  "),a("a",{attrs:{href:"https://play.google.com/store/apps/details?id=com.hypersign.cordova",target:"__blank"}},[t._v("Android")]),t._v("\n                  or\n                  "),a("a",{attrs:{href:t.$config.webWalletAddress,target:"__blank"}},[t._v("Web")])])])],1),a("div",{staticClass:"form-group"},[a("h5",[a("span",[t._v("Or")])])]),a("div",{staticClass:"mb-2 primary"},[""!=this.value?a("a",{staticClass:"btn btn-hypersign  button-theme",style:t.buttonThemeCss,attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.openWallet()}}},[a("div",{staticStyle:{"font-size":"smaller",padding:"10px"}},[t._v("\n                  Click To Login\n                ")])]):t._e()])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-9 floatRight"},[t._v("\n            Do not have an account?\n            "),a("a",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(e){return t.push("register")}}},[t._v("SignUp")])])])])],1)])],1)},O=[],A=a("d7b0"),T=a("658f"),D=a.n(T),L=a("41aa"),x=a.n(L),R=a("522b");console.log(Object({NODE_ENV:"production",VUE_APP_TITLE:"Entity Studio",VUE_APP_DESC:"A portal to issue and verify credentials on Hypersign Identity network!",VUE_APP_VERSION:"v1.0",VUE_APP_STUDIO_SERVER_BASE_URL:"https://stage.hypermine.in/studioserver/",VUE_APP_STUDIO_SERVER_BASE_WS:"wss://stage.hypermine.in/studioserverws/",VUE_APP_NODE_SERVER_BASE_URL:"https://jagrat.hypersign.id/node1/rpc/",VUE_APP_NODE_SERVER_BASE_URL_REST:"https://jagrat.hypersign.id/node1/rest/",VUE_APP_SCHEMA_GET_EP_REST:"hypersign-protocol/hidnode/ssi/schema/",VUE_APP_ACCPCT_CRED_EP:"api/v1/credential/accepct",VUE_APP_EXPLORER_BASE_URL:"https://explorer.hypersign.id/",VUE_APP_STUDIO_SERVER_SAVE_SCHEMA:"api/v1/schema/issue",VUE_APP_SCHEMA_LIST_EP:"api/v1/schema/get",VUE_APP_STUDIO_SERVER_CRED_LIST_EP:"api/v1/credential/list",VUE_APP_WEB_WALLET_ADDRESS:"https://wallet-stage.hypersign.id",VUE_APP_PRESENTATION_TEMPLATE_EP:"api/v1/presentation/template",VUE_APP_SCHEMA_SSE:"https://stage.hypermine.in/studioserver/api/v1/schema/sse/",BASE_URL:"/"}));var k={studioServer:{SCHEMA_SSE:"https://stage.hypermine.in/studioserver/api/v1/schema/sse/",BASE_URL:"https://stage.hypermine.in/studioserver/",ACCPCT_CRED_EP:"api/v1/credential/accepct",SAVE_SCHEMA_EP:"api/v1/schema/issue",CRED_LIST_EP:"api/v1/credential/list",SCHEMA_LIST_EP:"api/v1/schema/get",CRED_ISSUE_EP:x.a.value("STUDIO_SERVER_CRED_ISSUE_EP")||"api/v1/credential/issue",AUTH_CHALLENGE_EP:x.a.value("STUDIO_SERVER_AUTH_CHALLENGE_EP")||"api/auth/challenge",AUTH_LOGIN_EP:x.a.value("STUDIO_SERVER_AUTH_LOGIN_EP")||"api/auth/login",PRESENTATION_TEMPLATE_EP:"api/v1/presentation/template"},nodeServer:{BASE_URL:"https://jagrat.hypersign.id/node1/rpc/",BASE_URL_REST:"https://jagrat.hypersign.id/node1/rest/",SCHEMA_GET_REST:"hypersign-protocol/hidnode/ssi/schema/",NETWORK_STATUS_EP:x.a.value("NODE_SERVER_NETWORK_STATUS_EP")||"net_info",SCHEMA_LIST_EP:x.a.value("NODE_SERVER_SCHEMA_LIST_EP")||"api/schema/list",SCHEMA_GET_EP:x.a.value("NODE_SERVER_SCHEMA_GET_EP")||"api/schema/get",SCHEMA_CREATE_EP:x.a.value("NODE_SERVER_SCHEMA_CREATE_EP")||"api/schema/create",DID_RESOLVE_EP:x.a.value("NODE_SERVER_DID_RERSOLVE_EP")||"hypersign-protocol/hidnode/ssi/did/"},explorer:{BASE_URL:x.a.value("EXPLORER_BASE_URL"),NEW_DID_EP:x.a.value("EXPLORER_NEW_DID_EP")||"newdid"},app:{name:x.a.value("TITLE")||"Hypersign Studio",decription:x.a.value("DESC"),version:x.a.value("VERSION")}},I="wss://stage.hypermine.in/studioserverws/",$="https://wallet-stage.hypersign.id",N={nodeUrl:k.nodeServer.BASE_URL,didScheme:"did:hs"},U={did:R.did(N),credential:R.credential(N)};k["appName"]="Studio",k["hypersignSDK"]=U,k["websocketUrl"]=I,k["webWalletAddress"]=$;var j=k,V=a("9062"),B=a.n(V),H=(a("e40d"),void 0);function M(t,e,a,r,i,n,s){try{var o=t[n](s),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(r,i)}function q(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var n=t.apply(e,a);function s(t){M(n,r,i,s,o,"next",t)}function o(t){M(n,r,i,s,o,"throw",t)}s(void 0)}))}}var W,F=j.hypersignSDK,z=a("e2c9"),J=(z.sha256hashStr,{name:"Login",components:{QrcodeVue:A["a"],Loading:B.a,VueQr:D.a},data:function(){return{qr_data:{},src:a("555a"),active:0,username:"",password:"",host:location.hostname,challenge:"dddd",domain:location.host,QRCodeValue:this.$route.query,credentials:{},userData:{},user:{},verifiablePresentation:"",fullPage:!0,isLoading:!1,privateKey:"3isrtEJ4gt1ZHkdUYYph1WFAtzfqAL5WM6Hh1NC2hmWnDfBypXjt5oUFdAqQdiess2vqqQ3iF6x4fDVuvLw454sn",did:"did:hs:892325a4-75c9-465c-882b-91e3ca5143c3"}},created:function(){localStorage.clear(),document.title="".concat(j.appName," - Login"),this.connection=new WebSocket(this.$config.websocketUrl),console.log(this.$config.websocketUrl),this.connection.onopen=function(){console.log("Socket connection is open")},this.isLoading=!0;var t=this;this.connection.onmessage=function(e){var a=e.data,r=JSON.parse(a);if(console.log(r),"init"==r.op)t.isLoading=!1,r.data["provider"]="google",t.value=JSON.stringify(r.data),t.qr_data="".concat(t.$config.webWalletAddress,"/deeplink?url=").concat(t.value),console.log(t.qr_data);else if("end"==r.op){t.connection.close();var i=r.data.hypersign.data.accessToken,n=r.data.hypersign.data.refreshToken;localStorage.setItem("authToken",i),localStorage.setItem("refreshToken",n),v.$emit("initializeStore","login"),null!=localStorage.getItem("authToken")&&(this.walletWindow&&this.walletWindow.close(),null!=t.$route.params.nextUrl?t.$router.push(t.$route.params.nextUrl):t.$router.push("dashboard"))}else"reload"==r.op&&(t.QRRefresh=!0,t.qr_data=null,t.connection.close(4001,r.data.clientId),t.$router.go())},this.connection.onerror=function(t){console.log("Websocket connection error ",t)}},mounted:function(){this.clean()},methods:{push:function(t){this.$router.push(t)},openWallet:function(){if(""!=this.value){var t="".concat(this.$config.webWalletAddress,"/deeplink?url=").concat(this.value);this.walletWindow=window.open(t,"popUpWindow","height=800,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes")}},clean:function(){localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("credentials"),localStorage.removeItem("userData")},notifySuccess:function(t){this.$notify({group:"foo",title:"Information",type:"success",text:t})},notifyErr:function(t){this.$notify({group:"foo",title:"Error",type:"error",text:t})},gotosubpage:function(t){H.$router.push("".concat(t))},generatePresentation:function(){var t=q(o.a.mark((function t(){var e,a,r,i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=JSON.parse(localStorage.getItem("keys")),this.user.privateKey=e.privateKeyBase58,this.user.id=e.publicKey.id,this.user.did=this.user.id.split("#")[0],a=JSON.parse(localStorage.getItem("credential")),this.user.name=a["credentialSubject"]["Name"],this.user.email=a["credentialSubject"]["Email"],a){t.next=9;break}throw new Error("VC is null");case 9:return t.next=11,F.credential.generatePresentation(a,this.user.id);case 11:return r=t.sent,this.notifySuccess("Presentation generated"),t.next=15,F.credential.signPresentation(r,this.user.id,this.user.privateKey,this.challenge.challenge);case 15:i=t.sent,this.notifySuccess("Presentation signed"),this.verifiablePresentation=JSON.stringify(i),localStorage.removeItem("credential"),localStorage.removeItem("keys");case 20:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),downloadPresentation:function(){var t=q(o.a.mark((function t(){return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.generatePresentation();case 2:this.forceFileDownload(this.verifiablePresentation,"vp.json");case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),forceFileDownload:function(t,e){var a=window.URL.createObjectURL(new Blob([t])),r=document.createElement("a");r.href=a,r.setAttribute("download",e),document.body.appendChild(r),r.click()},readFile:function(t,e){var a=new FileReader;a.onload=e,a.readAsText(t)},onFileChange:function(t){var e=t.target.files[0];this.readFile(e,this.onfileLoadSuccess)},onfileLoadSuccess:function(t){var e=JSON.parse(t.target.result);e||this.notifyErr("Incorrect file"),e["type"]&&e["type"].find((function(t){return"VerifiableCredential"==t}))?(localStorage.removeItem("credential"),localStorage.setItem("credential",JSON.stringify(e))):e["privateKeyBase58"]?(localStorage.removeItem("keys"),localStorage.setItem("keys",JSON.stringify(e))):this.notifyErr("Invalid file")},login:function(){var t=q(o.a.mark((function t(e){var a,r,i,n=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.isLoading=!0,a="",r={"Content-Type":"application/json"},a="".concat(this.$config.studioServer.BASE_URL,"api/auth/login_pki?type=PKI"),r["x-auth-token"]=this.challenge.JWTChallenge,t.next=8,this.generatePresentation();case 8:i={fname:this.user.name,email:this.user.email,publicKey:this.user.did,proof:this.verifiablePresentation,challenge:this.challenge?this.challenge.challenge:"",domain:this.domain},console.log(".............before fetch"),fetch(a,{body:JSON.stringify(i),method:"POST",headers:r}).then((function(t){return t.json()})).then((function(t){if(n.isLoading=!1,t&&500==t.status)return n.notifyErr("Error:  ".concat(t.error));localStorage.setItem("authToken",t.message.jwtToken),t.message.user["privateKey"]=n.user.privateKey,localStorage.setItem("user",JSON.stringify(t.message.user)),null!=localStorage.getItem("authToken")&&(null!=n.$route.params.nextUrl?n.$router.push(n.$route.params.nextUrl):n.$router.push("dashboard"))})),t.next=19;break;case 13:t.prev=13,t.t0=t["catch"](0),console.log(t.t0),this.clean(),this.isLoading=!1,this.notifyErr("Error: ".concat(t.t0.message));case 19:case"end":return t.stop()}}),t,this,[[0,13]])})));function e(e){return t.apply(this,arguments)}return e}()}}),K=J,G=(a("6bf1"),Object(p["a"])(K,P,O,!1,null,"727b5342",null)),Q=G.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"col-md-3",staticStyle:{"font-size":"small",color:"grey","margin-left":"36%"}},[a("form",{staticStyle:{padding:"6px"},attrs:{action:"#"}},[a("b-card",{staticStyle:{padding:"40px"},attrs:{"no-body":""}},[a("h4",[t._v("Sign Up")]),a("hr"),a("div",{staticClass:"row"},[a("form",{staticClass:"col-md-12",attrs:{action:"#"}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"floatLeft"},[t._v("Name:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fullName,expression:"fullName"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter name"},domProps:{value:t.fullName},on:{input:function(e){e.target.composing||(t.fullName=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"floatLeft"},[t._v("Email:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Enter email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"floatLeft"},[t._v("Hypersign DID ("),a("a",{attrs:{href:""+t.$config.explorer.BASE_URL,target:"_blank"}},[t._v("Get a DID")]),t._v("):")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.did,expression:"did"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter DID (did:hs:...)"},domProps:{value:t.did},on:{input:function(e){e.target.composing||(t.did=e.target.value)}}})])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-3",attrs:{hidden:""}},[a("button",{staticClass:"btn btn-primary btn-sm floatLeft",attrs:{type:"button","data-toggle":"modal"},on:{click:function(e){return t.downloadPresentation()}}},[t._v("View Proof")])]),a("div",{staticClass:"col-sm-3"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-toggle":"modal"},on:{click:function(e){return t.signup()}}},[t._v("Signup")])]),a("div",{staticClass:"col-md-9 floatRight"},[t._v("\n            Back to\n            "),a("a",{staticStyle:{color:"blue",cursor:"pointer"},on:{click:function(e){return t.push("login")}}},[t._v("Login")])])])])],1)])],1)},Y=[],Z=a("a18f"),tt=a.n(Z),et=void 0;function at(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function rt(t,e,a,r,i,n,s){try{var o=t[n](s),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(r,i)}function it(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var n=t.apply(e,a);function s(t){rt(n,r,i,s,o,"next",t)}function o(t){rt(n,r,i,s,o,"throw",t)}s(void 0)}))}}var nt=a("e2c9"),st=(nt.sha256hashStr,W={name:"Register",components:{}},at(W,"components",{Loading:B.a}),at(W,"data",(function(){return{active:0,fullName:"",email:"",phno:"",publicKey:"",username:"",password:"",host:location.hostname,keys:{},did:"",isLoading:!1,fullPage:!0}})),at(W,"created",(function(){})),at(W,"methods",{push:function(t){this.$router.push(t)},gotosubpage:function(t){et.$router.push("".concat(t))},notifySuccess:function(t){this.$notify({group:"foo",title:"Information",type:"success",text:t})},notifyErr:function(t){this.$notify({group:"foo",title:"Error",type:"error",text:t})},signup:function(){var t=it(o.a.mark((function t(){var e,a,r,i;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isLoading=!0,t.prev=1,""!=this.email&&""!=this.name&&""!=this.did){t.next=4;break}throw new Error("All fields are mandatory");case 4:return e={fname:this.fullName,email:this.email,publicKey:this.did},a="".concat(this.$config.studioServer.BASE_URL,"api/auth/register"),t.next=8,tt()(a,{body:JSON.stringify(e),method:"POST",headers:{"Content-Type":"application/json"}});case 8:return r=t.sent,t.next=11,r.json();case 11:if(i=t.sent,500!=i.status){t.next=15;break}throw this.isLoading=!1,new Error(i.error);case 15:this.isLoading=!1,alert("An email has been sent to you. Please click on the link to verify and download HypersignAuth credentials."),this.isLoading=!1,this.$router.push("login"),t.next=25;break;case 21:t.prev=21,t.t0=t["catch"](1),this.isLoading=!1,this.notifyErr(t.t0.message);case 25:case"end":return t.stop()}}),t,this,[[1,21]])})));function e(){return t.apply(this,arguments)}return e}()}),W),ot=st,ct=(a("19f3"),Object(p["a"])(ot,X,Y,!1,null,"c9b8fd9e",null)),lt=ct.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"text-align":"left"}},[a("Info",{attrs:{message:t.description}}),a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],attrs:{variant:"link"}},[t._v("Issue Credential")])],1),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("form",{staticStyle:{"max-height":"300px",overflow:"auto",padding:"5px"}},[a("div",{staticClass:"form-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.holderDid,expression:"holderDid"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Issued To (did:hs:...)"},domProps:{value:t.holderDid},on:{input:function(e){e.target.composing||(t.holderDid=e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("b-form-select",{staticClass:"mt-3",attrs:{options:t.selectOptions,size:"md"},on:{change:function(e){return t.OnSchemaSelectDropDownChange(e)}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),t._l(t.issueCredAttributes,(function(e){return a("div",{key:e.name,staticClass:"form-group"},[a("label",[t._v(t._s(e.name))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"attr.value"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Enter attribute value"},domProps:{value:e.value},on:{input:function(a){a.target.composing||t.$set(e,"value",a.target.value)}}})])}))],2),a("hr"),a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.issueCredential()}}},[t._v("Issue")])]),t.isCredentialIssued?a("div",{staticClass:"col-md-6",staticStyle:{padding:"30px"}},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"center"}},[a("qrcode-vue",{attrs:{value:t.signedVerifiableCredential,size:200,level:"H"}}),a("label",{staticClass:"title"},[t._v("Scan the QR code using Hypersign Wallet!")])],1),a("div",{staticClass:"form-group",staticStyle:{"text-align":"center"}},[a("p"),a("h5",[t._v("OR")]),a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.downloadCredentials()}}},[t._v("Download Credential")])])]):t._e()])])])],1)],1)]),a("div",{staticClass:"row",staticStyle:{"margin-top":"2%"}},[a("div",{staticClass:"col-md-12"},[a("table",{staticClass:"table table-bordered",staticStyle:{background:"#FFFF"}},[t._m(0),a("tbody",t._l(t.vcList,(function(e){return a("tr",{key:e.vc_id},[a("td",[e.vc_id?a("a",{attrs:{href:e.vc_id+":",target:"_blank>"}},[t._v(t._s(t.shorten(e.vc_id)))]):t._e(),a("span",[t._v("-")])]),a("td",[a("a",{attrs:{href:""+t.$config.nodeServer.BASE_URL_REST+t.$config.nodeServer.SCHEMA_GET_REST+e.schemaId+":",target:"_blank"}},[t._v(t._s(t.shorten(e.schemaId)))])]),a("td",[t._v(t._s(e.subjectDid))]),a("td",[t._v(t._s(e.credStatus?e.credStatus.issuanceDate:"-"))]),a("td",[t._v(t._s(e.credStatus?e.credStatus.expirationDate:"-"))]),a("td",[t._v(" "+t._s(e.credStatus?e.credStatus.claim.currentStatus:"Initiated"))]),a("td",[t._v(t._s(e.credStatus?e.credStatus.claim.statusReason:"-"))]),a("td",[e.credStatus?a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.generateCred(""+e._id)}}},[t._v("Send")]):a("span",[t._v("-")])])])})),0)]),a("hf-pop-up",{attrs:{Header:"Accept Credential URL"}},[a("Info",{attrs:{message:"Copy and send this URL to the credential owner so that they can accept in their wallet"}}),a("p",{staticStyle:{"max-width":"500px","word-wrap":"break-word"}},[t._v(t._s(t.credUrl))])],1)],1)])],1)},dt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-light"},[a("tr",[a("th",[t._v("VC Id")]),a("th",[t._v("Schema Id")]),a("th",[t._v("Holder DID")]),a("th",[t._v("Issuance Date")]),a("th",[t._v("Expiration Date")]),a("th",[t._v("Status")]),a("th",[t._v("Status Reason")]),a("th")])])}],ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",{staticClass:"message"},[t._v("\n    "+t._s(t.message)+"\n")])},pt=[],mt={name:"Info",props:["message"],mounted:function(){}},ft=mt,gt=(a("7899"),Object(p["a"])(ft,ht,pt,!1,null,"7080b038",null)),vt=gt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-modal",{ref:"modal-1",attrs:{"hide-footer":"",title:t.Header,centered:""},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t._t("default")],2)},St=[],bt={data:function(){return{show:!1}},props:{Header:{type:String,require:!0}},created:function(){this.openModal(),this.closeModal()},methods:{openModal:function(){var t=this;this.$root.$on("modal-show",(function(){t.show=!0}))},closeModal:function(){var t=this;this.$root.$on("modal-close",(function(){t.show=!1}))}}},Et=bt,yt=Object(p["a"])(Et,_t,St,!1,null,null,null),Ct=yt.exports;function wt(t,e,a,r,i,n,s){try{var o=t[n](s),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(r,i)}function Pt(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var n=t.apply(e,a);function s(t){wt(n,r,i,s,o,"next",t)}function o(t){wt(n,r,i,s,o,"throw",t)}s(void 0)}))}}function Ot(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var At={name:"IssueCredential",components:{Info:vt,HfPopUp:Ct,Loading:B.a},computed:{vcList:function(){return this.$store.state.vcList},selectOptions:function(){return this.$store.getters.listOfAllSchemaOptions},selectedOrg:function(){return this.$store.getters.getSelectedOrg}},data:function(){var t;return t={authToken:localStorage.getItem("authToken"),description:'An issuer can issue a credential to a subject (or holder) which can be verfied by the verifier independently, without having him to connect with the issuer. They are a part of our daily lives; driver\'s licenses are used to assert that we are capable of operating a motor vehicle, university degrees can be used to assert our level of education, and government-issued passports enable us to travel between countries.  For example: an airline company can issue a flight ticket ("verfiable credential") using schema (issued by DGCA) to the passenger.',active:0,host:location.hostname,user:{},prevRoute:null,attributeName:"",attributes:[],issueCredAttributes:[],radioSelected:"create",credentialName:"",isCredentialIssued:!1,signedVerifiableCredential:"",credentials:JSON.parse(localStorage.getItem("credentials")),subjectDid:"did:hs:AmitKumar",radioOptions:[{text:"Create new schema",value:"create"},{text:"Select existing schema",value:"existing"}],selected:null,attributeValues:{}},Ot(t,"authToken",localStorage.getItem("authToken")),Ot(t,"vcCredStatusMap",{}),Ot(t,"schemaList",[]),Ot(t,"fullPage",!0),Ot(t,"isLoading",!1),Ot(t,"holderDid",""),Ot(t,"schema_page",1),Ot(t,"credUrl",""),Ot(t,"QrData",{QRType:"ISSUE_CREDENTIAL",serviceEndpoint:"",schemaId:"",appDid:"",appName:"Hypersign Studio",challenge:"",provider:"",data:""}),t},created:function(){var t=localStorage.getItem("user");this.user=JSON.parse(t)},beforeRouteEnter:function(t,e,a){a((function(t){t.prevRoute=e}))},methods:{generateCred:function(){var t=Pt(o.a.mark((function t(e){var a,r,i,n,s;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={id:e},r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)},i=this.$config.studioServer.BASE_URL+this.$config.studioServer.ACCPCT_CRED_EP,t.next=5,tt()(i,r);case 5:return n=t.sent,t.next=8,n.json();case 8:s=t.sent,this.credUrl=s.url,this.$root.$emit("modal-show"),this.notifySuccess("Cred Url Generated Successfully");case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),openWallet:function(t){""!=t&&(this.walletWindow=window.open("".concat(t),"popUpWindow","height=800,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes"))},OnSchemaSelectDropDownChange:function(t){if(t){this.issueCredAttributes=[];var e=this.issueCredAttributes.length,a=this.$store.getters.findSchemaBySchemaID(t),r=a.schemaDetails.schema.properties;for(var i in r)this.issueCredAttributes.push({id:e+t,type:i.type,name:i,required:!0===i.required,value:""})}else this.issueCredAttributes=[]},forceFileDownload:function(t,e){var a=window.URL.createObjectURL(new Blob([t])),r=document.createElement("a");r.href=a,r.setAttribute("download",e),document.body.appendChild(r),r.click()},downloadCredentials:function(){this.forceFileDownload(JSON.stringify(this.signedVerifiableCredential),"vc.json")},generateAttributeMap:function(){var t=[];return this.issueCredAttributes.length>0&&this.issueCredAttributes.forEach((function(e){t[e.name]=e.value})),console.log(t),t},issueCredential:function(){var t=Pt(o.a.mark((function t(){var e,a,r,i,n,s,c,l,u=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.isLoading=!0,""!=this.holderDid){t.next=4;break}throw new Error("Please enter the holder did");case 4:if(null!=this.selected){t.next=6;break}throw new Error("Please select a schema");case 6:return t.next=8,this.generateAttributeMap();case 8:e=t.sent,a=Object.assign({},e),r=this.selected,i=this.user.id,n=this.holderDid,s="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.CRED_ISSUE_EP),c={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)},l={fields:a,schemaId:r,issuerDid:i,subjectDid:n,orgDid:this.$store.state.selectedOrgDid},this.QrData.data=l,tt()(s,{method:"POST",headers:c,body:JSON.stringify({QR_DATA:this.QrData})}).then((function(t){return t.json()})).then((function(t){var e=t.QR_DATA,a="".concat(u.$config.webWalletAddress,"/deeplink?url=").concat(JSON.stringify(e));u.openWallet(a)})),t.next=24;break;case 20:t.prev=20,t.t0=t["catch"](0),this.isLoading=!1,this.notifyErr("Error: ".concat(t.t0.message));case 24:return t.prev=24,this.isLoading=!1,t.finish(24);case 27:case"end":return t.stop()}}),t,this,[[0,20,24,27]])})));function e(){return t.apply(this,arguments)}return e}()},mixins:[c]},Tt=At,Dt=(a("c3c7"),Object(p["a"])(Tt,ut,dt,!1,null,"4ceb52cf",null)),Lt=Dt.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"text-align":"left"}},[a("Info",{attrs:{message:t.description}}),a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],attrs:{variant:"link"}},[t._v("Generate Presentation Template")])],1),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("form",{staticStyle:{"max-height":"300px","min-height":"300px",overflow:"auto",padding:"5px"}},[a("div",{staticClass:"form-group"},[a("label",{staticClass:"floatLeft"},[t._v("Domain :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.domain,expression:"presentationTemplate.domain"}],staticClass:"form-control",attrs:{type:"url"},domProps:{value:t.presentationTemplate.domain},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"domain",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"floatLeft"},[t._v("Name (optional):")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.name,expression:"presentationTemplate.name"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.presentationTemplate.name},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"floatLeft"},[t._v("IssuerDid")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.issuerDid,expression:"presentationTemplate.issuerDid"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.presentationTemplate.issuerDid},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"issuerDid",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"floatLeft"},[t._v("Schema Id :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.schemaId,expression:"presentationTemplate.schemaId"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.presentationTemplate.schemaId},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"schemaId",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"floatLeft"},[t._v("Reason :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.reason,expression:"presentationTemplate.reason"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.presentationTemplate.reason},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"reason",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"floatLeft"},[t._v("Callback URI")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.callbackUrl,expression:"presentationTemplate.callbackUrl"}],staticClass:"form-control",attrs:{type:"url"},domProps:{value:t.presentationTemplate.callbackUrl},on:{input:function(e){e.target.composing||t.$set(t.presentationTemplate,"callbackUrl",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{staticClass:"floatLeft "},[t._v("Required :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.presentationTemplate.required,expression:"presentationTemplate.required"}],staticClass:"form-control",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.presentationTemplate.required)?t._i(t.presentationTemplate.required,null)>-1:t.presentationTemplate.required},on:{change:function(e){var a=t.presentationTemplate.required,r=e.target,i=!!r.checked;if(Array.isArray(a)){var n=null,s=t._i(a,n);r.checked?s<0&&t.$set(t.presentationTemplate,"required",a.concat([n])):s>-1&&t.$set(t.presentationTemplate,"required",a.slice(0,s).concat(a.slice(s+1)))}else t.$set(t.presentationTemplate,"required",i)}}})])]),a("hr"),a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.generatePresentation()}}},[t._v("Generate")])]),t.isCredentialIssued?a("div",{staticClass:"col-md-6",staticStyle:{padding:"30px"}},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"center"}},[a("qrcode-vue",{attrs:{value:t.signedVerifiablePresentation,size:200,level:"H"}}),a("label",{staticClass:"title"},[t._v("Scan the QR code using Hypersign Wallet!")])],1),a("div",{staticClass:"form-group",staticStyle:{"text-align":"center"}},[a("p"),a("h5",[t._v("OR")]),a("button",{staticClass:"btn btn-link",on:{click:function(e){return t.downloadCredentials()}}},[t._v("Download Presentation")])])]):t._e()])])])],1)],1)]),a("div",{staticClass:"row",staticStyle:{"margin-top":"2%"}},[a("div",{staticClass:"col-md-12"},[a("table",{staticClass:"table table-bordered",staticStyle:{background:"#FFFF"}},[t._m(0),a("tbody",t._l(t.templateList,(function(e){return a("tr",{key:e},[a("td",[t._v(t._s(e._id))]),a("td",[t._v(t._s(e.domain))]),a("td",[t._v(t._s(e.name))]),a("td",[t._v(t._s(e.issuerDid.toString()))]),a("td",[t._v(t._s(t.shorten(e.schemaId)))]),a("td",[t._v(t._s(e.reason))]),a("td",[t._v(t._s(e.callbackUrl))])])})),0)])])])],1)},Rt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-light"},[a("tr",[a("th",[t._v("Template Id ")]),a("th",[t._v("Domain")]),a("th",[t._v("Name")]),a("th",[t._v("Issuer DID")]),a("th",[t._v("Schema Id")]),a("th",[t._v("Reason")]),a("th",[t._v("CallbackUrl")])])])}],kt=void 0;function It(t,e,a,r,i,n,s){try{var o=t[n](s),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(r,i)}function $t(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var n=t.apply(e,a);function s(t){It(n,r,i,s,o,"next",t)}function o(t){It(n,r,i,s,o,"throw",t)}s(void 0)}))}}var Nt=j.hypersignSDK,Ut={name:"Presentation",components:{QrcodeVue:A["a"],Info:vt},computed:{templateList:function(){return this.$store.state.templateList},selectedOrg:function(){return this.$store.getters.getSelectedOrg}},data:function(){return{description:"The subject (or holder) generates verifiable presentation from one or more verifiable       credentials, issued by one or more issuers, that is shared with a specific verifier.       A verifiable presentation is a tamper-evident presentation encoded in such a way that       authorship of the data can be trusted after a process of cryptographic verification.       Certain types of verifiable presentations might contain data that is synthesized from,       but do not contain, the original verifiable credentials for example, in order to proof the       subject that he/she is an adult, she/he does not have to tell his/her actual age       (i.e. Zero knowledge proof). The airline passenger might not have to show the complete ticket      to the secruity personal to pass the security check. The passenger will have ability to show       just one document (the verifiable presentation) derived from his passport and air ticket to      show at the security check.",presentationTemplate:{queryType:"QueryByExample",domain:"",name:"",issuerDid:"",schemaId:"",reason:"",required:!0,callbackUrl:""},active:0,host:location.hostname,user:{},prevRoute:null,attributeName:"",attributes:[],issueCredAttributes:[],radioSelected:"create",credentialName:"",isCredentialIssued:!1,signedVerifiableCredential:"",credentials:JSON.parse(localStorage.getItem("credentials")),subjectDid:"did:hs:AmitKumar",radioOptions:[{text:"Create new schema",value:"create"},{text:"Select existing schema",value:"existing"}],selected:null,attributeValues:{},authToken:localStorage.getItem("authToken"),selectOptions:[{value:null,text:"Please select a schema"}],schemaMap:{},vcList:[],schemaList:[],fullPage:!0,isLoading:!1,holderDid:"did:hs:8b915133-cb8b-4151-9a63-1b91f702297f",signedVerifiablePresentation:{},presentationDetails:{credentialType:{}},isClaims:!1}},created:function(){var t=localStorage.getItem("user");this.user=JSON.parse(t),this.fetchTemplates()},beforeRouteEnter:function(t,e,a){a((function(t){t.prevRoute=e}))},methods:{showClaims:function(){this.isClaims?this.isClaims=!1:this.isClaims=!0},notifySuccess:function(t){this.$notify({group:"foo",title:"Information",type:"success",text:t})},notifyErr:function(t){this.$notify({group:"foo",title:"Error",type:"error",text:t})},fetchData:function(t,e){var a=this;tt()(t).then((function(t){return t.json()})).then((function(t){if(200!=t.status)throw new Error(t.error);return t.message})).catch((function(t){return a.notifyErr("Error: ".concat(t.message))}))},gotosubpage:function(t){kt.$router.push("".concat(t))},addBlankAttrBox:function(){" "!=this.attributeName&&(this.attributes.push(this.attributeName),this.attributeName=" ")},downloadCredentials:function(){this.forceFileDownload(JSON.stringify(this.signedVerifiablePresentation),"vp.json")},onfileLoadSuccess:function(t){var e=JSON.parse(t.target.result);e||this.notifyErr("Incorrect file");var a=e["type"];a.find((function(t){return"VerifiableCredential"==t}))?(localStorage.removeItem("credential"),localStorage.setItem("credential",JSON.stringify(e))):a.find((function(t){return"VerifiablePresentation"==t}))?(localStorage.removeItem("presentation"),localStorage.setItem("presentation",JSON.stringify(e))):this.notifyErr("Invalid file")},readFile:function(t,e){var a=new FileReader;a.onload=e,a.readAsText(t)},onFileChange:function(t){var e=t.target.files[0];this.readFile(e,this.onfileLoadSuccess)},generatePresentation:function(){var t=$t(o.a.mark((function t(){var e,a,r,i,n=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.isLoading=!0;try{e=this.presentationTemplate.issuerDid.split(","),a={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)},r={issuerDid:e,queryType:this.presentationTemplate.queryType,domain:this.presentationTemplate.domain,name:this.presentationTemplate.name,schemaId:this.presentationTemplate.schemaId,reason:this.presentationTemplate.reason,required:this.presentationTemplate.required,callbackUrl:this.presentationTemplate.callbackUrl,orgDid:this.$store.state.selectedOrgDid},i="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.PRESENTATION_TEMPLATE_EP),tt()(i,{body:JSON.stringify(r),method:"POST",headers:a}).then((function(t){return t.json()})).then((function(t){n.$store.commit("insertApresentationTemplate",t),n.notifySuccess("Template Successfully created")}))}catch(s){this.isLoading=!1,this.notifyErr(s.message)}case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),viewPresentation:function(){this.isLoading=!0;try{var t=JSON.parse(localStorage.getItem("presentation"));if(!t)throw new Error("Please select verifiable presentation file");var e=t.verifiableCredential[0];this.presentationDetails={},this.presentationDetails.credentialType={name:e.type[1],url:e["@context"][1]["hsscheme"]},this.presentationDetails.issuerDid=e.issuer,this.presentationDetails.holderDid=e.credentialSubject.id,this.presentationDetails.issuanceDate=e.issuanceDate,this.presentationDetails.expirationDate=e.expirationDate,this.presentationDetails.claim=e.credentialSubject}catch(a){this.isLoading=!1,this.notifyErr(a.message)}},clear:function(){this.presentationDetails="",localStorage.removeItem("presentation"),localStorage.removeItem("credential"),this.$refs.vpFile.value=null,this.$refs.vcFile.value=null,this.signedVerifiablePresentation={},this.isCredentialIssued=!1},verifyPresentation:function(){var t=$t(o.a.mark((function t(){var e,a,r;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.isLoading=!0,t.prev=1,e=JSON.parse(localStorage.getItem("presentation")),e){t.next=5;break}throw new Error("Please select verifiable presentation file");case 5:return a=e.verifiableCredential[0],t.next=8,Nt.credential.verifyPresentation({presentation:e,challenge:"test_challenge",issuerDid:a.issuer,holderDid:a.credentialSubject.id});case 8:r=t.sent,r.verified?this.notifySuccess("Presentation verified"):this.notifyErr("Presentation can not verified"),this.isLoading=!1,this.clear(),t.next=18;break;case 14:t.prev=14,t.t0=t["catch"](1),this.isLoading=!1,this.notifyErr(t.t0.message);case 18:case"end":return t.stop()}}),t,this,[[1,14]])})));function e(){return t.apply(this,arguments)}return e}()},mixins:[c]},jt=Ut,Vt=(a("f989"),Object(p["a"])(jt,xt,Rt,!1,null,"c5c56282",null)),Bt=Vt.exports,Ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home marginRight marginLeft"},[a("h3",{staticClass:"leftAlign"},[t._v("Welcome, "+t._s(t.user.name)+" !")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("Profile")],1),a("div",{staticClass:"col-md-6"},[a("Dashboard")],1)])])},Mt=[],qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row",staticStyle:{padding:"10px"}},[a("div",{staticClass:"col-md-6",staticStyle:{"margin-left":"40%"}},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[t._v("\n            NETWORK DETAILS "),!0===t.networkStatus.result.listening?a("span",{staticClass:"dot"}):t._e()]),a("div",{staticClass:"card-body leftAlign"},[a("p",[t._v("NETWORK\n            ")]),a("p",{staticClass:"fVal"},[t._v(t._s(t.networkStatus.result.peers[0].node_info.network.toUpperCase()+"  NETWORK"))]),a("p",[t._v("NODE URL\n            ")]),a("p",{staticClass:"fVal"},[a("a",{attrs:{href:t.networkStatus.nodeUrl,target:"_blank"}},[t._v(t._s(this.$config.nodeServer.BASE_URL))])]),a("p",[t._v("EXPLORER URL\n            ")]),a("p",{staticClass:"fVal"},[a("a",{attrs:{href:t.networkStatus.explorerUrl,target:"_blank"}},[t._v(t._s(this.$config.explorer.BASE_URL))])])])])])])},Wt=[],Ft=void 0;function zt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function Jt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?zt(Object(a),!0).forEach((function(e){Kt(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):zt(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function Kt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Gt(t,e,a,r,i,n,s){try{var o=t[n](s),c=o.value}catch(l){return void a(l)}o.done?e(c):Promise.resolve(c).then(r,i)}function Qt(t){return function(){var e=this,a=arguments;return new Promise((function(r,i){var n=t.apply(e,a);function s(t){Gt(n,r,i,s,o,"next",t)}function o(t){Gt(n,r,i,s,o,"throw",t)}s(void 0)}))}}var Xt={name:"PanelPage",mounted:function(){},components:{},data:function(){return{active:0,networkStatus:{result:{listening:"false",listeners:[],n_peers:"",peers:[{}]},status:"DOWN",nodeUrl:"",explorerUrl:this.$config.explorer.BASE_URL,schemaCount:"0",didCount:"0"}}},created:function(){var t=Qt(o.a.mark((function t(){var e,a=this;return o.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="".concat(this.$config.nodeServer.BASE_URL).concat(this.$config.nodeServer.NETWORK_STATUS_EP),t.next=3,fetch(e).then((function(t){return t.json()})).then((function(t){a.networkStatus=Jt({},t),console.log(a.networkStatus.result.peers[0])})).catch((function(t){return alert("Error: ".concat(t.message))}));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{gotosubpage:function(t){Ft.$router.push("".concat(t))}}},Yt=Xt,Zt=(a("cce2"),Object(p["a"])(Yt,qt,Wt,!1,null,"3109faa8",null)),te=Zt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"margin-top":"2%","margin-bottom":"7%"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body tile"},[t._v(t._s(t.schemaCount))]),a("div",{staticClass:"card-header"},[t._v("AUTHORED SCHEMA")])])]),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body tile"},[t._v(t._s(t.credentialCount))]),a("div",{staticClass:"card-header"},[t._v("ISSUED CREDENTIALS")])])])])]),a("div",{staticClass:"col-md-10 leftAlign"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[t._m(0),a("div",{staticClass:"col-md-8",staticStyle:{"flex-wrap":"wrap",padding:"20px"}},[a("p",[t._v("DID")]),a("p",{staticClass:"fVal"},[a("a",{attrs:{href:""+t.$config.nodeServer.BASE_URL_REST+t.$config.nodeServer.DID_RESOLVE_EP+t.user.id+":",target:"_blank"}},[t._v(t._s(t.user.id))])]),a("p",[t._v("EMAIL")]),a("p",{staticClass:"fVal"},[t._v(t._s(t.user.email))]),t.user.phoneNumber?a("p",[t._v("Phone Number: "+t._s(t.user.phoneNumber))]):t._e()])])])])])])},ae=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-4"},[a("img",{staticStyle:{width:"100%",height:"100%"},attrs:{src:"https://cdn1.iconfinder.com/data/icons/female-avatars-vol-1/256/female-portrait-avatar-profile-woman-sexy-afro-2-512.png",alt:"John"}})])}],re=void 0;function ie(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function ne(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ie(Object(a),!0).forEach((function(e){se(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ie(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function se(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var oe={name:"Profile",mounted:function(){},components:{},computed:{credentialCount:function(){return this.$store.getters.totalCredentials},schemaCount:function(){return this.$store.getters.totalSchemas}},data:function(){return{active:0,userKeys:[],appList:[],user:{id:"",publicKey:"",email:"",phoneNumber:"",fname:""},authToken:localStorage.getItem("authToken")}},created:function(){var t=localStorage.getItem("user");this.user=ne({},JSON.parse(t)),this.userKeys=Object.keys(this.user)},methods:{fetchData:function(t,e){return fetch(t,e).then((function(t){return t.json()})).then((function(t){return t.message})).catch((function(t){return alert("Error: ".concat(t.message))}))},pollData:function(){var t=this,e="".concat(this.$config.nodeServer.BASE_URL).concat(this.$config.nodeServer.SCHEMA_LIST_EP),a={};this.fetchData(e).then((function(e){e&&e.length>0&&(e=e.filter((function(e){return e.owner===t.user.id})),t.schemaCount=e.length)})),e="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.CRED_LIST_EP),a={method:"GET",headers:{"x-auth-token":this.authToken}},this.fetchData(e,a).then((function(e){e&&(t.credentialCount=e.count)}))},gotosubpage:function(t){re.$router.push("".concat(t))}}},ce=oe,le=(a("d472"),Object(p["a"])(ce,ee,ae,!1,null,"0e0b89e9",null)),ue=le.exports,de=void 0,he={name:"PanelPage",components:{Dashboard:te,Profile:ue},data:function(){return{appList:[],user:{},appName:"",authToken:localStorage.getItem("authToken")}},created:function(){var t=localStorage.getItem("user");this.user=JSON.parse(t)},methods:{gotosubpage:function(t){de.$router.push("".concat(t))},logout:function(){localStorage.removeItem("authToken"),localStorage.removeItem("user"),localStorage.removeItem("credentials"),localStorage.removeItem("userData"),null!=this.$route.params.nextUrl?this.$router.push(this.$route.params.nextUrl):this.$router.push("/login")}}},pe=he,me=(a("22e7"),Object(p["a"])(pe,Ht,Mt,!1,null,"89d98a22",null)),fe=me.exports,ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("loading",{attrs:{active:t.isLoading,"can-cancel":!0,"is-full-page":t.fullPage},on:{"update:active":function(e){t.isLoading=e}}}),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12",staticStyle:{"text-align":"left"}},[a("Info",{attrs:{message:t.description}}),a("div",{staticClass:"card"},[a("div",{staticClass:"card-header"},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-1",modifiers:{"collapse-1":!0}}],attrs:{variant:"link"}},[t._v("Create Schema")])],1),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-1"}},[a("div",{staticClass:"card-body"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group form-inline"},[a("label",{staticStyle:{"margin-right":"8%"}},[t._v("Schema Name:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.credentialName,expression:"credentialName"}],staticClass:"form-control",attrs:{type:"text",size:"30",placeholder:"Enter schema name"},domProps:{value:t.credentialName},on:{input:function(e){e.target.composing||(t.credentialName=e.target.value)}}})]),a("div",{staticClass:"form-group form-inline"},[a("label",{staticStyle:{"margin-right":"12%"}},[t._v("Description:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.credentialDescription,expression:"credentialDescription"}],staticClass:"form-control",attrs:{rows:"5",cols:"29",placeholder:"Enter description"},domProps:{value:t.credentialDescription},on:{input:function(e){e.target.composing||(t.credentialDescription=e.target.value)}}})]),a("div",{staticClass:"form-group form-inline"},[a("label",{staticStyle:{"margin-right":"3%"}},[t._v("Additional Properties")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.additionalProperties,expression:"additionalProperties"}],attrs:{size:"100px",type:"checkbox"},domProps:{checked:Array.isArray(t.additionalProperties)?t._i(t.additionalProperties,null)>-1:t.additionalProperties},on:{change:function(e){var a=t.additionalProperties,r=e.target,i=!!r.checked;if(Array.isArray(a)){var n=null,s=t._i(a,n);r.checked?s<0&&(t.additionalProperties=a.concat([n])):s>-1&&(t.additionalProperties=a.slice(0,s).concat(a.slice(s+1)))}else t.additionalProperties=i}}})])]),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group form-inline"},[a("label",{staticStyle:{"margin-right":"5%"}},[t._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.attributeName,expression:"attributeName"}],staticClass:"form-control",attrs:{type:"text",size:"30",placeholder:"Enter attribute name"},domProps:{value:t.attributeName},on:{input:function(e){e.target.composing||(t.attributeName=e.target.value)}}})]),a("div",{staticClass:"form-group form-inline"},[a("label",{staticStyle:{"margin-right":"5%"}},[t._v("Type")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.attributeTypes,expression:"attributeTypes"}],staticClass:"form-control",attrs:{type:"text",size:"30",placeholder:"Enter attribute Type (eg. String)"},domProps:{value:t.attributeTypes},on:{input:function(e){e.target.composing||(t.attributeTypes=e.target.value)}}})]),a("div",{staticClass:"form-group form-inline"},[a("label",{staticStyle:{"margin-right":"5%"}},[t._v("Format")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.attributeFormat,expression:"attributeFormat"}],staticClass:"form-control",attrs:{type:"text",size:"30",placeholder:"Enter attribute Format (eg email)"},domProps:{value:t.attributeFormat},on:{input:function(e){e.target.composing||(t.attributeFormat=e.target.value)}}})]),a("div",{staticClass:"form-group form-inline"},[a("label",{staticStyle:{"margin-right":"5%"}},[t._v("Required")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.attributeRequired,expression:"attributeRequired"}],staticClass:"form-control",attrs:{type:"checkbox",size:"200px"},domProps:{checked:Array.isArray(t.attributeRequired)?t._i(t.attributeRequired,null)>-1:t.attributeRequired},on:{change:function(e){var a=t.attributeRequired,r=e.target,i=!!r.checked;if(Array.isArray(a)){var n=null,s=t._i(a,n);r.checked?s<0&&(t.attributeRequired=a.concat([n])):s>-1&&(t.attributeRequired=a.slice(0,s).concat(a.slice(s+1)))}else t.attributeRequired=i}}})]),a("a",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"5%","border-radius":"30px",color:"white"},on:{click:function(e){return t.addBlankAttrBox()}}},[t._v("Add +")])]),a("div",{staticClass:"form-group",staticStyle:{"min-height":"150px","max-height":"150px",overflow:"auto"}},t._l(t.attributes,(function(e){return a("div",{key:e.type},[a("div",{staticClass:"sm-tiles"},[t._v("\n                      "+t._s(e.name)+"\n                      "),a("span",[t._v("x")])])])})),0)])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("hr"),a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.createSchema()}}},[t._v("Create")])])])])])],1)],1)]),a("div",{staticClass:"row",staticStyle:{"margin-top":"2%"}},[a("div",{staticClass:"col-md-12"},[a("table",{staticClass:"table table-bordered",staticStyle:{background:"#FFFF"}},[t._m(0),a("tbody",t._l(t.schemaList,(function(e){return a("tr",{key:e._id},[a("td",[a("a",{attrs:{href:""+t.$config.nodeServer.BASE_URL_REST+t.$config.nodeServer.SCHEMA_GET_REST+e.schemaId+":",target:"_blank"}},[t._v(t._s(e.schemaId?t.shorten(e.schemaId):"-"))])]),a("td",[t._v(t._s(e.schemaDetails?e.schemaDetails.name:"-"))]),a("td",[t._v(t._s(e.schemaDetails?e.schemaDetails.modelVersion:"-"))]),a("td",{staticClass:"word-wrap"},[t._v(t._s(e.schemaDetails?e.schemaDetails.schema.description:"-"))]),a("td",{staticClass:"word-wrap"},[t._v(t._s(e.schemaDetails?Object.keys(e.schemaDetails.schema.properties).toString():"-"))]),a("td",[t._v(t._s(e.schemaDetails?e.schemaDetails.authored:"-"))]),a("td",{staticStyle:{"word-wrap":"break-word","min-width":"200px","max-width":"200px"}},[e.transactionHash?a("a",{attrs:{target:"_blank",href:t.$config.explorer.BASE_URL+"explorer/txdetails?hash=0x"+e.transactionHash}},[t._v(t._s(t.shorten("0x"+e.transactionHash)))]):a("span",[t._v("-")])]),a("td",[t._v(t._s(e.status))])])})),0)])])])],1)},ve=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",{staticClass:"thead-light"},[a("tr",[a("th",[t._v("Schema Id")]),a("th",[t._v("Name")]),a("th",[t._v("Model Version")]),a("th",[t._v("Description")]),a("th",[t._v("Properties")]),a("th",[t._v("Created At")]),a("th",[t._v("Transaction Hash")]),a("th",[t._v("Status")])])])}],_e=void 0,Se={name:"IssueCredential",components:{QrcodeVue:A["a"],Info:vt,Loading:B.a},computed:{schemaList:function(){return this.$store.state.schemaList},selectedOrg:function(){return this.$store.getters.getSelectedOrg}},data:function(){return{description:"Credential Schema defines what information will go inside a verifiable credential. For example: Directorate General of Civil Aviation (DGCA) can define a schema (or format) for flights tickets, being issued by all airline companies in India.",active:0,host:location.hostname,user:{},page:1,prevRoute:null,attributeName:"",attributeTypes:"",attributeFormat:"",attributeRequired:!1,attributes:[],issueCredAttributes:[],additionalProperties:!1,showSchema:!0,radioSelected:"create",credentialName:"",isCredentialIssued:!1,signedVerifiableCredential:"",authToken:localStorage.getItem("authToken"),credentialDescription:"",fullPage:!0,isLoading:!1,QrData:{QRType:"ISSUE_SCHEMA",serviceEndpoint:"",schemaId:"",appDid:"",appName:"Hypersign Studio",challenge:"",provider:"",data:""}}},created:function(){var t=localStorage.getItem("user");this.user=JSON.parse(t)},beforeRouteEnter:function(t,e,a){a((function(t){t.prevRoute=e}))},methods:{gotosubpage:function(t){_e.$router.push("".concat(t))},addBlankAttrBox:function(){if(console.log(this.attributeName,this.attributeTypes),""!==this.attributeName&&""!==this.attributeTypes){var t={name:this.attributeName,type:this.attributeTypes,format:this.attributeFormat,isRequired:this.attributeRequired};console.log(t),this.attributes.push(t),this.attributeName="",this.attributeTypes="",this.attributeFormat="",this.attributeRequired=!1}else this.notifyErr("Name or Type Cannot be blank")},ssePupulateSchema:function(t,e){var a=new EventSource("".concat(j.studioServer.SCHEMA_SSE).concat(t),{withCredentials:!0,headers:{Authorization:"Bearer "+this.authToken}});a.onmessage=function(t){var r=JSON.parse(t.data);console.log(r),"Registered"===r.status&&(a.close(),e.dispatch("insertAschema",r))},a.onerror=function(t){console.log(t),a.close()}},openWallet:function(t){""!=t&&(this.walletWindow=window.open("".concat(t),"popUpWindow","height=800,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes"))},createSchema:function(){var t=this;try{if(this.isLoading=!0,""==this.credentialName)throw new Error("SchemaName can not be blank");if(0==this.attributes.length)throw new Error("Atleast one attribute is required");var e="".concat(this.$config.studioServer.BASE_URL).concat(this.$config.studioServer.SAVE_SCHEMA_EP),a={name:this.credentialName,author:this.user.id,fields:this.attributes,description:this.credentialDescription,additionalProperties:this.additionalProperties,orgDid:this.$store.state.selectedOrgDid};this.QrData.data=a;var r={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)};tt()(e,{method:"POST",body:JSON.stringify({QR_DATA:this.QrData}),headers:r}).then((function(t){return t.json()})).then((function(e){var a=e.QR_DATA;if(200!==e.status)throw new Error("".concat(e.error));t.notifySuccess("Schema creation initiated. Please approve the transaction from your wallet"),t.credentialName="Schema",t.$store.dispatch("insertAschema",e.schema);var r="".concat(t.$config.webWalletAddress,"/deeplink?url=").concat(JSON.stringify(a));t.openWallet(r),t.ssePupulateSchema(e.schema._id,t.$store)}))}catch(i){console.error(i),this.notifyErr("Error: ".concat(i.message))}finally{this.isLoading=!1}}},mixins:[c]},be=Se,Ee=(a("77a8"),Object(p["a"])(be,ge,ve,!1,null,"200f8e8c",null)),ye=Ee.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"form-group",staticStyle:{"text-align":"right"}},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.openSlider()}}},[t._v("+ Organization")])]),a("StudioSideBar",{attrs:{title:"Add Organization"}},[a("div",{staticClass:"container"},[t.orgStore.orgDid?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"orgName"}},[a("strong",[t._v("Org DID:")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore.orgDid,expression:"orgStore.orgDid"}],staticClass:"form-control",attrs:{type:"text",id:"orgDid","aria-describedby":"orgNameHelp",disabled:""},domProps:{value:t.orgStore.orgDid},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"orgDid",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"orgNameHelp"}},[a("a",{attrs:{href:""+t.$config.nodeServer.BASE_URL_REST+t.$config.nodeServer.DID_RESOLVE_EP+t.orgStore.orgDid+":",target:"_blank"}},[t._v("Resolve DID")])])]):a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"orgName"}},[a("strong",[t._v("Org ID:")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore._id,expression:"orgStore._id"}],staticClass:"form-control",attrs:{type:"text",id:"orgDid","aria-describedby":"orgNameHelp",disabled:""},domProps:{value:t.orgStore._id},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"_id",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"orgName"}},[a("strong",[t._v("Organization Name:")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore.name,expression:"orgStore.name"}],staticClass:"form-control",attrs:{type:"text",id:"orgName","aria-describedby":"orgNameHelp",placeholder:"Enter your org name"},domProps:{value:t.orgStore.name},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"name",e.target.value)}}}),a("small",{staticClass:"form-text text-muted",attrs:{id:"orgNameHelp"}},[t._v("Some help text")])]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"domain"}},[a("strong",[t._v("Domain:")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore.domain,expression:"orgStore.domain"}],staticClass:"form-control",attrs:{type:"text",id:"domain","aria-describedby":"domainHelp",placeholder:"Enter your domain name"},domProps:{value:t.orgStore.domain},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"domain",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"logo"}},[a("strong",[t._v("Logo URL:")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore.logo,expression:"orgStore.logo"}],staticClass:"form-control",attrs:{type:"text",id:"logo","aria-describedby":"logoHelp",placeholder:"Enter logo URL"},domProps:{value:t.orgStore.logo},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"logo",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"region"}},[a("strong",[t._v("Region:")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.orgStore.region,expression:"orgStore.region"}],staticClass:"form-control",attrs:{type:"text",id:"region","aria-describedby":"regionHelp",placeholder:"Select your region"},domProps:{value:t.orgStore.region},on:{input:function(e){e.target.composing||t.$set(t.orgStore,"region",e.target.value)}}})]),t.edit?a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.createAnOrg()}}},[t._v(" Edit")])]):a("div",{staticClass:"form-group"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.createAnOrg()}}},[t._v(" Save")])])])]),a("div",{staticClass:"row"},t._l(t.orgList,(function(e){return a("div",{key:e._id,staticClass:"col-lg-3"},[a("b-card",{staticClass:"mb-2 eventCard",staticStyle:{"max-width":"20rem","margin-top":"20px"},attrs:{title:e.name,"img-src":e.logo,"img-alt":"Image","img-top":"","img-height":"150",tag:"article"}},[a("ul",{staticStyle:{"list-style-type":"none","padding-left":"0px","font-size":"small"}},[a("li",[a("span",{staticClass:"card-title"},[t._v(t._s(e.network))])]),a("li",[a("span",{staticClass:"card-title"},[t._v(t._s(e.region))])])]),a("footer",[a("small",{staticStyle:{float:"right"}},[a("span",{staticStyle:{cursor:"pointer"},attrs:{title:"Click to edit this event"},on:{click:function(a){return t.editOrg(e._id)}}},[t._v("\n              Edit\n            ")]),t._v(" |\n            "),a("span",{staticStyle:{cursor:"pointer"},attrs:{title:"Click to edit this event"},on:{click:function(a){return t.switchOrg(e._id)}}},[t._v("\n              Switch\n            ")])])])])],1)})),0)],1)},we=[],Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-sidebar",{attrs:{id:"sidebar-right",width:"40%",title:t.title,right:"",shadow:"",backdrop:""}},[t._t("default")],2)],1)},Oe=[],Ae={props:{title:{type:String,required:!0}}},Te=Ae,De=Object(p["a"])(Te,Pe,Oe,!1,null,null,null),Le=De.exports;function xe(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function Re(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(a),!0).forEach((function(e){ke(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):xe(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function ke(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var Ie={computed:{orgList:function(){return this.$store.state.orgList}},data:function(){return{edit:!1,orgStore:{name:"Hypermine Pvt Ltd",domain:"hypermine.in",logo:"https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Ftse2.mm.bing.net%2Fth%3Fid%3DOIP.5EZ51foyo3QBV2FHnKq1cwHaEc%26pid%3DApi&f=1",region:"US EAST",network:"Jagrat",orgDid:"",userDid:""},authToken:localStorage.getItem("authToken"),isLoading:!0}},components:{HfPopUp:Ct,Loading:B.a,StudioSideBar:Le},methods:{openWallet:function(t){""!=t&&(this.walletWindow=window.open("".concat(t),"popUpWindow","height=800,width=400,left=100,top=100,resizable=yes,scrollbars=yes,toolbar=yes,menubar=no,location=no,directories=no, status=yes"))},switchOrg:function(t){this.$store.commit("selectAnOrg",t),this.$store.dispatch("fetchAllOrgDataOnOrgSelect",t)},openSlider:function(){this.$root.$emit("bv::toggle::collapse","sidebar-right")},editOrg:function(t){this.edit=!0,Object.assign(this.orgStore,Re({},this.$store.getters.findOrgByOrgID(t))),this.openSlider()},createAnOrg:function(){var t,e,a=this;this.edit?(e="PUT",t="".concat(this.$config.studioServer.BASE_URL,"api/v1/org/update")):(t="".concat(this.$config.studioServer.BASE_URL,"api/v1/org/create"),e="POST");var r={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)};this.orgStore.userDid=JSON.parse(localStorage.getItem("user")).id;var i={orgData:this.orgStore};this.isLoading=!0,fetch(t,{method:e,body:JSON.stringify(i),headers:r}).then((function(t){return t.json()})).then((function(t){if(console.log(t),!a.edit){var e=t.QrData,r="".concat(a.$config.webWalletAddress,"/deeplink?url=").concat(JSON.stringify(e));a.openWallet(r)}200===t.status&&(a.$store.commit("insertAnOrg",t.org),a.$store.commit("selectAnOrg",t.org._id),a.openSlider(),a.notifySuccess("Org Created successfull"),a.edit&&(a.$store.commit("updateAnOrg",t.org),a.notifySuccess("Org Edited successfull")))})).catch((function(t){console.log(t),a.notifyError("Something went wrong")})).finally((function(){a.isLoading=!1}))}},mixins:[c]},$e=Ie,Ne=(a("9208"),Object(p["a"])($e,Ce,we,!1,null,"ac70db74",null)),Ue=Ne.exports;r["default"].use(w["a"]);var je=new w["a"]({mode:"hash",routes:[{path:"/",redirect:"/studio",requiresAuth:!0},{path:"/login",redirect:"/studio/login"},{path:"/studio",redirect:"/studio/dashboard",requiresAuth:!0},{path:"/studio/login",name:"PKIIdLogin",component:Q},{path:"/studio/dashboard",name:"dashboard",component:fe,meta:{requiresAuth:!0}},{path:"/studio/org",name:"Org",component:Ue,meta:{requiresAuth:!0}},{path:"/studio/register",name:"register",component:lt},{path:"/studio/schema",name:"schema",component:ye,meta:{requiresAuth:!0}},{path:"/studio/credential",name:"credential",component:Lt,meta:{requiresAuth:!0}},{path:"/studio/presentation",name:"presentation",component:Bt,meta:{requiresAuth:!0}}]});je.beforeEach((function(t,e,a){if(t.matched.some((function(t){return t.meta.requiresAuth}))){var r=localStorage.getItem("authToken");if(r){var i="".concat(j.studioServer.BASE_URL,"protected");console.log(i),tt()(i,{headers:{Authorization:"Bearer ".concat(r)},method:"POST"}).then((function(t){return t.json()})).then((function(e){403==e.status?a({path:"/studio/login",params:{nextUrl:t.fullPath}}):(localStorage.setItem("user",JSON.stringify(e.message)),console.log(e),a())})).catch((function(e){console.log(e),a({path:"/studio/login",params:{nextUrl:t.fullPath}})}))}else a({path:"/studio/login",params:{nextUrl:t.fullPath}})}else a()}));var Ve=je,Be=a("5f5b"),He=a("ee98"),Me=a.n(He),qe=a("2f62");function We(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function Fe(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?We(Object(a),!0).forEach((function(e){ze(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):We(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function ze(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}r["default"].use(qe["a"]);var Je=new qe["a"].Store({state:{schemaList:[],vcList:[],templateList:[],orgList:[],selectedOrgDid:""},getters:{isAnyOrgSelected:function(t){return""!=t.selectedOrgDid},totalSchemas:function(t){return t.schemaList.length},totalCredentials:function(t){return t.vcList.length},findSchemaBySchemaID:function(t){return function(e){return t.schemaList.find((function(t){return t.schemaId===e}))}},findOrgByOrgID:function(t){return function(e){return t.orgList.find((function(t){return t._id===e}))}},getSelectedOrg:function(t){return t.orgList.find((function(e){return e._id===t.selectedOrgDid}))},listOfAllSchemaOptions:function(t){var e=t.schemaList.map((function(t){return t.schemaId&&void 0!==t.schemaId&&"Registered"===t.status?{text:t.schemaDetails.name,value:t.schemaId}:null}));return e=e.filter((function(t){return t})),e.unshift({value:null,text:"Please select a schema"}),e}},mutations:{resetStore:function(t){console.log("resetting store"),t.orgList=[],t.schemaList=[],t.vcList=[],t.templateList=[],t.selectedOrgDid=""},selectAnOrg:function(t,e){t.selectedOrgDid=e},insertAschema:function(t,e){t.schemaList.find((function(t){return t._id===e._id}))?(console.log("already exists scheme id ="+e._id),this.commit("updateAschema",e)):t.schemaList.push(e)},insertAnOrg:function(t,e){t.orgList.find((function(t){return t._id===e._id}))?console.log("already exists scheme id ="+e._id):t.orgList.push(e)},updateAschema:function(t,e){console.log("updating schema");var a=t.schemaList.findIndex((function(t){return t._id===e._id}));Object.assign(t.schemaList[a],Fe({},e))},updateAnOrg:function(t,e){var a=t.orgList.findIndex((function(t){return t._id===e._id}));Object.assign(t.orgList[a],Fe({},e))},insertApresentationTemplate:function(t,e){t.templateList.find((function(t){return t._id===e._id}))||t.templateList.push(e)},insertAcredential:function(t,e){t.vcList.find((function(t){return t._id===e._id}))?console.log("already exists credential id ="+e._id):t.vcList.push(e)}},actions:{insertAschema:function(t,e){var a=t.commit,r=e.schemaId;if(r){var i="".concat(j.nodeServer.BASE_URL_REST).concat(j.nodeServer.SCHEMA_GET_REST).concat(r,":");fetch(i).then((function(t){return t.json()})).then((function(t){var r=t.schema[0];if(r.schema.properties){var i=r.schema.properties,n=JSON.parse(i);r.schema.properties=n}e["schemaDetails"]=r,a("insertAschema",e)})).catch((function(t){return console.log}))}else a("insertAschema",e)},insertAcredential:function(t,e){var a=t.commit,r=e.vc_id;r?fetch(r+":").then((function(t){return t.json()})).then((function(t){Object.assign(e,Fe({},t)),a("insertAcredential",e)})).catch((function(t){return console.log})):a("insertAcredential",e)},fetchAllOrgDataOnOrgSelect:function(t,e){var a=this;t.commit;this.authToken=localStorage.getItem("authToken");var r="".concat(j.studioServer.BASE_URL,"api/v1/presentation/template/org/").concat(this.getters.getSelectedOrg._id,"/"),i={"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)};fetch(r,{headers:i}).then((function(t){return t.json()})).then((function(t){0!==t.length?(a.state.templateList=[],t.forEach((function(t){a.commit("insertApresentationTemplate",t)}))):a.state.templateList=[]}));var n="".concat(j.studioServer.BASE_URL).concat(j.studioServer.SCHEMA_LIST_EP,"/").concat(this.getters.getSelectedOrg._id,"/?page=1&limit=10"),s={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)}};fetch(n,{headers:s.headers}).then((function(t){return t.json()})).then((function(t){t&&0!==t.schemaList.length?(a.state.schemaList=[],t.schemaList.forEach((function(t){a.dispatch("insertAschema",t)}))):a.state.schemaList=[]}));var o="".concat(j.studioServer.BASE_URL).concat(j.studioServer.CRED_LIST_EP,"/").concat(this.getters.getSelectedOrg._id),c={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.authToken)}};fetch(o,{headers:c.headers}).then((function(t){return t.json()})).then((function(t){t&&0!==t.credList.length?(a.state.vcList=[],t.credList.forEach((function(t){a.dispatch("insertAcredential",t)}))):a.state.vcList=[]}))}}});a("f9e3"),a("2dd8");r["default"].config.productionTip=!1,r["default"].use(Be["a"]),r["default"].use(Me.a),r["default"].prototype.$config=j,new r["default"]({router:Ve,store:Je,render:function(t){return t(C)}}).$mount("#app")},"5d25":function(t,e,a){"use strict";var r=a("89c2"),i=a.n(r);i.a},6:function(t,e){},"65b3":function(t,e,a){},"6bf1":function(t,e,a){"use strict";var r=a("b344"),i=a.n(r);i.a},7:function(t,e){},"77a8":function(t,e,a){"use strict";var r=a("0348"),i=a.n(r);i.a},7899:function(t,e,a){"use strict";var r=a("4c49"),i=a.n(r);i.a},8:function(t,e){},"89c2":function(t,e,a){},9:function(t,e,a){t.exports=a("56d7")},9208:function(t,e,a){"use strict";var r=a("f978"),i=a.n(r);i.a},b0a0:function(t,e,a){"use strict";var r=a("07bb"),i=a.n(r);i.a},b344:function(t,e,a){},c3c7:function(t,e,a){"use strict";var r=a("18aa"),i=a.n(r);i.a},cce2:function(t,e,a){"use strict";var r=a("5425"),i=a.n(r);i.a},d109:function(t,e,a){},d472:function(t,e,a){"use strict";var r=a("f2e8"),i=a.n(r);i.a},e2c9:function(t,e,a){var r=a("69f2"),i=a("7247");i.ModeOfOperation.ctr;function n(t){return r("sha256").update(t).digest()}function s(t){return i.utils.hex.fromBytes(n(t))}t.exports={sha256hashStr:s}},f1b8:function(t,e,a){},f2e8:function(t,e,a){},f978:function(t,e,a){},f989:function(t,e,a){"use strict";var r=a("d109"),i=a.n(r);i.a}});
//# sourceMappingURL=app.5344446e.js.map